{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { getFirebaseToken } from \"./getFirebaseToken\";\nexport default function updateHostToApi(host) {\n  var token;\n  return _regeneratorRuntime.async(function updateHostToApi$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(getFirebaseToken());\n\n        case 2:\n          token = _context.sent;\n          return _context.abrupt(\"return\", fetch(process.env.NEXT_PUBLIC_DOMAIN + \"api/hosts/edit\", {\n            method: \"post\",\n            body: JSON.stringify(host),\n            headers: {\n              \"content-type\": \"application/json\",\n              Authorization: \"Bearer \" + token\n            }\n          }).then(function (res) {\n            if (res.status === 200) {\n              return true;\n            }\n\n            throw new Error(\"Couldn't add host to api\");\n          }));\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}","map":{"version":3,"sources":["/Users/stanislav.kovalov/Desktop/uasos/apps/next/src/helpers/updateHostToApi.ts"],"names":["getFirebaseToken","updateHostToApi","host","token","fetch","process","env","NEXT_PUBLIC_DOMAIN","method","body","JSON","stringify","headers","Authorization","then","res","status","Error"],"mappings":";AACA,SAASA,gBAAT;AAEA,eAAe,SAAeC,eAAf,CAA+BC,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACOF,gBAAgB,EADvB;;AAAA;AACPG,UAAAA,KADO;AAAA,2CAENC,KAAK,CAACC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GAAiC,gBAAlC,EAAoD;AAC9DC,YAAAA,MAAM,EAAE,MADsD;AAE9DC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf,CAFwD;AAG9DU,YAAAA,OAAO,EAAE;AACP,8BAAgB,kBADT;AAEPC,cAAAA,aAAa,cAAYV;AAFlB;AAHqD,WAApD,CAAL,CAOJW,IAPI,CAOC,UAAUC,GAAV,EAAe;AACrB,gBAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB,qBAAO,IAAP;AACD;;AACD,kBAAM,IAAIC,KAAJ,CAAU,0BAAV,CAAN;AACD,WAZM,CAFM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { HostProps } from \"../../pages/api/hosts/edit\";\nimport { getFirebaseToken } from \"./getFirebaseToken\";\n\nexport default async function updateHostToApi(host: HostProps) {\n  const token = await getFirebaseToken();\n  return fetch(process.env.NEXT_PUBLIC_DOMAIN + \"api/hosts/edit\", {\n    method: \"post\",\n    body: JSON.stringify(host),\n    headers: {\n      \"content-type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  }).then(function (res) {\n    if (res.status === 200) {\n      return true;\n    }\n    throw new Error(\"Couldn't add host to api\");\n  });\n}\n"]},"metadata":{},"sourceType":"module"}