{"ast":null,"code":"import { AccommodationTime } from \"../../helpers/FormTypes\";\nexport var Boolean;\n\n(function (Boolean) {\n  Boolean[\"FALSE\"] = \"FALSE\";\n  Boolean[\"TRUE\"] = \"TRUE\";\n})(Boolean || (Boolean = {}));\n\nexport var GuestHostType;\n\n(function (GuestHostType) {\n  GuestHostType[\"INACTIVE\"] = \"inactive\";\n  GuestHostType[\"LOOKING_FOR_MATCH\"] = \"looking_for_match\";\n  GuestHostType[\"FOUND_A_MATCH\"] = \"found_a_match\";\n  GuestHostType[\"BEING_CONFIRMED\"] = \"being_confirmed\";\n  GuestHostType[\"CONFIRMED\"] = \"confirmed\";\n  GuestHostType[\"REJECTED\"] = \"rejected\";\n})(GuestHostType || (GuestHostType = {}));\n\nexport var GuestHostStatus;\n\n(function (GuestHostStatus) {\n  GuestHostStatus[\"ACCEPTED\"] = \"accepted\";\n  GuestHostStatus[\"REJECTED\"] = \"rejected\";\n  GuestHostStatus[\"BEING_PROCESS\"] = \"being_processed\";\n  GuestHostStatus[\"MATCHED\"] = \"matched\";\n  GuestHostStatus[\"MATCH_ACCEPTED\"] = \"match_accepted\";\n  GuestHostStatus[\"DEFAULT\"] = \"default\";\n})(GuestHostStatus || (GuestHostStatus = {}));\n\nvar MatchStatus;\n\n(function (MatchStatus) {\n  MatchStatus[\"ACCEPTED\"] = \"accepted\";\n  MatchStatus[\"REJECTED\"] = \"rejected\";\n  MatchStatus[\"TIMEOUT\"] = \"timeout\";\n  MatchStatus[\"AWAITING_RESPONSE\"] = \"awaiting_response\";\n  MatchStatus[\"DEFAULT\"] = \"default\";\n})(MatchStatus || (MatchStatus = {}));\n\nexport var toOffers = function toOffers(xs) {\n  return xs.offers.map(toOffer);\n};\nexport var toRequests = function toRequests(xs) {\n  return xs.requests.map(toRequest);\n};\n\nvar toOffer = function toOffer(o) {\n  return {\n    id: o.id,\n    imageUrl: \"https://images.contentstack.io/v3/assets/bltec2ed8e3c4b1e16d/bltfbcc7f32e0cd6ff5/617b2ba9b187491e7c56dfca/getting-started-on-airbnb-optimized.jpg\",\n    type: o.type,\n    beds: o.beds,\n    city: o.city,\n    duration: toAccomodationTime(o.duration_category),\n    name: toName(o),\n    state: toMatchOfferState(o),\n    matchedRequest: o.matchedRequest,\n    closestCity: o.closest_city,\n    matchId: o.match_id,\n    clientOnly: o.client_only\n  };\n};\n\nvar toMatchOfferState = function toMatchOfferState(o) {\n  var matchStatus = o.status;\n\n  if (!matchStatus) {\n    return \"LOOKING_FOR_A_MATCH\";\n  }\n\n  switch (matchStatus) {\n    case GuestHostStatus.MATCH_ACCEPTED:\n      return \"CONFIRMED\";\n\n    case GuestHostStatus.MATCHED:\n      return \"FOUND_MATCH\";\n\n    case GuestHostStatus.DEFAULT:\n      return \"LOOKING_FOR_A_MATCH\";\n\n    case GuestHostStatus.BEING_PROCESS:\n      return \"BEING_CONFIRMED\";\n\n    case GuestHostStatus.ACCEPTED:\n      return \"LOOKING_FOR_A_MATCH\";\n  }\n\n  return \"LOOKING_FOR_A_MATCH\";\n};\n\nvar toRequest = function toRequest(r) {\n  var _r$city;\n\n  return {\n    type: r.type,\n    id: r.id,\n    beds: r.beds,\n    city: (_r$city = r.city) != null ? _r$city : \"N/A\",\n    duration: toAccomodationTime(r.duration_category),\n    state: toMatchRequestState(r),\n    matchedOffer: r.matchedOffer,\n    matchId: r.match_id,\n    clientOnly: r.client_only\n  };\n};\n\nvar toName = function toName(o) {\n  return o.shelter_type.length === 0 ? \"N/A\" : typeof o.shelter_type === \"string\" ? o.shelter_type : o.shelter_type.join(\", \");\n};\n\nexport var toAccomodationTime = function toAccomodationTime(duration_category) {\n  var _duration_category$ma;\n\n  return (_duration_category$ma = duration_category.map(function (c) {\n    switch (c) {\n      case \"less_than_1_week\":\n        return AccommodationTime.LESS_THAN_WEEK;\n\n      case \"1_week\":\n      case \"week\":\n        return AccommodationTime.WEEK;\n\n      case \"two_weeks\":\n      case \"2_3_weeks\":\n        return AccommodationTime.TWO_WEEKS;\n\n      case \"month\":\n        return AccommodationTime.MONTH;\n\n      case \"longer\":\n        return AccommodationTime.LONGER;\n\n      default:\n        return undefined;\n    }\n  }).slice(-1).pop()) != null ? _duration_category$ma : AccommodationTime.LESS_THAN_WEEK;\n};\n\nvar toMatchRequestState = function toMatchRequestState(r) {\n  var matchStatus = r.match_status;\n\n  if (!matchStatus) {\n    return \"LOOKING_FOR_A_MATCH\";\n  }\n\n  switch (matchStatus) {\n    case MatchStatus.ACCEPTED:\n      return \"CONFIRMED\";\n\n    case MatchStatus.AWAITING_RESPONSE:\n      return \"FOUND_MATCH\";\n\n    case MatchStatus.DEFAULT:\n      return \"LOOKING_FOR_A_MATCH\";\n\n    case MatchStatus.REJECTED:\n      return \"INACTIVE\";\n\n    case MatchStatus.TIMEOUT:\n      return \"INACTIVE\";\n  }\n\n  return \"LOOKING_FOR_A_MATCH\";\n};","map":{"version":3,"sources":["/Users/stanislav.kovalov/Desktop/uasos/apps/next/src/components/SupportSection/mapper.ts"],"names":["AccommodationTime","Boolean","GuestHostType","GuestHostStatus","MatchStatus","toOffers","xs","offers","map","toOffer","toRequests","requests","toRequest","o","id","imageUrl","type","beds","city","duration","toAccomodationTime","duration_category","name","toName","state","toMatchOfferState","matchedRequest","closestCity","closest_city","matchId","match_id","clientOnly","client_only","matchStatus","status","MATCH_ACCEPTED","MATCHED","DEFAULT","BEING_PROCESS","ACCEPTED","r","toMatchRequestState","matchedOffer","shelter_type","length","join","c","LESS_THAN_WEEK","WEEK","TWO_WEEKS","MONTH","LONGER","undefined","slice","pop","match_status","AWAITING_RESPONSE","REJECTED","TIMEOUT"],"mappings":"AAIA,SAASA,iBAAT;AAGA,WAAYC,OAAZ;;WAAYA,O;AAAAA,EAAAA,O;AAAAA,EAAAA,O;GAAAA,O,KAAAA,O;;AAKZ,WAAYC,aAAZ;;WAAYA,a;AAAAA,EAAAA,a;AAAAA,EAAAA,a;AAAAA,EAAAA,a;AAAAA,EAAAA,a;AAAAA,EAAAA,a;AAAAA,EAAAA,a;GAAAA,a,KAAAA,a;;AASZ,WAAYC,eAAZ;;WAAYA,e;AAAAA,EAAAA,e;AAAAA,EAAAA,e;AAAAA,EAAAA,e;AAAAA,EAAAA,e;AAAAA,EAAAA,e;AAAAA,EAAAA,e;GAAAA,e,KAAAA,e;;IASPC,W;;WAAAA,W;AAAAA,EAAAA,W;AAAAA,EAAAA,W;AAAAA,EAAAA,W;AAAAA,EAAAA,W;AAAAA,EAAAA,W;GAAAA,W,KAAAA,W;;AAQL,OAAO,IAAMC,QAA2C,GAAG,SAA9CA,QAA8C,CAACC,EAAD;AAAA,SACzDA,EAAE,CAACC,MAAH,CAAUC,GAAV,CAAcC,OAAd,CADyD;AAAA,CAApD;AAGP,OAAO,IAAMC,UAAiD,GAAG,SAApDA,UAAoD,CAC/DJ,EAD+D;AAAA,SAE5DA,EAAE,CAACK,QAAH,CAAYH,GAAZ,CAAgBI,SAAhB,CAF4D;AAAA,CAA1D;;AAIP,IAAMH,OAAO,GAAG,SAAVA,OAAU,CAACI,CAAD;AAAA,SAA2B;AACzCC,IAAAA,EAAE,EAAED,CAAC,CAACC,EADmC;AAEzCC,IAAAA,QAAQ,EACN,mJAHuC;AAIzCC,IAAAA,IAAI,EAAEH,CAAC,CAACG,IAJiC;AAKzCC,IAAAA,IAAI,EAAEJ,CAAC,CAACI,IALiC;AAMzCC,IAAAA,IAAI,EAAEL,CAAC,CAACK,IANiC;AAOzCC,IAAAA,QAAQ,EAAEC,kBAAkB,CAACP,CAAC,CAACQ,iBAAH,CAPa;AAQzCC,IAAAA,IAAI,EAAEC,MAAM,CAACV,CAAD,CAR6B;AASzCW,IAAAA,KAAK,EAAEC,iBAAiB,CAACZ,CAAD,CATiB;AAUzCa,IAAAA,cAAc,EAAEb,CAAC,CAACa,cAVuB;AAWzCC,IAAAA,WAAW,EAAEd,CAAC,CAACe,YAX0B;AAYzCC,IAAAA,OAAO,EAAEhB,CAAC,CAACiB,QAZ8B;AAazCC,IAAAA,UAAU,EAAElB,CAAC,CAACmB;AAb2B,GAA3B;AAAA,CAAhB;;AAeA,IAAMP,iBAAgD,GAAG,SAAnDA,iBAAmD,CAACZ,CAAD,EAAO;AAC9D,MAAMoB,WAAW,GAAGpB,CAAC,CAACqB,MAAtB;;AACA,MAAI,CAACD,WAAL,EAAkB;AAChB,WAAO,qBAAP;AACD;;AACD,UAAQA,WAAR;AACE,SAAK9B,eAAe,CAACgC,cAArB;AACE,aAAO,WAAP;;AACF,SAAKhC,eAAe,CAACiC,OAArB;AACE,aAAO,aAAP;;AACF,SAAKjC,eAAe,CAACkC,OAArB;AACE,aAAO,qBAAP;;AACF,SAAKlC,eAAe,CAACmC,aAArB;AACE,aAAO,iBAAP;;AACF,SAAKnC,eAAe,CAACoC,QAArB;AACE,aAAO,qBAAP;AAVJ;;AAYA,SAAO,qBAAP;AACD,CAlBD;;AAoBA,IAAM3B,SAAuC,GAAG,SAA1CA,SAA0C,CAAC4B,CAAD;AAAA;;AAAA,SAAQ;AACtDxB,IAAAA,IAAI,EAAEwB,CAAC,CAACxB,IAD8C;AAEtDF,IAAAA,EAAE,EAAE0B,CAAC,CAAC1B,EAFgD;AAGtDG,IAAAA,IAAI,EAAEuB,CAAC,CAACvB,IAH8C;AAItDC,IAAAA,IAAI,aAAEsB,CAAC,CAACtB,IAAJ,sBAAY,KAJsC;AAKtDC,IAAAA,QAAQ,EAAEC,kBAAkB,CAACoB,CAAC,CAACnB,iBAAH,CAL0B;AAMtDG,IAAAA,KAAK,EAAEiB,mBAAmB,CAACD,CAAD,CAN4B;AAOtDE,IAAAA,YAAY,EAAEF,CAAC,CAACE,YAPsC;AAQtDb,IAAAA,OAAO,EAAEW,CAAC,CAACV,QAR2C;AAStDC,IAAAA,UAAU,EAAES,CAAC,CAACR;AATwC,GAAR;AAAA,CAAhD;;AAYA,IAAMT,MAAiC,GAAG,SAApCA,MAAoC,CAACV,CAAD;AAAA,SACxCA,CAAC,CAAC8B,YAAF,CAAeC,MAAf,KAA0B,CAA1B,GACI,KADJ,GAEI,OAAO/B,CAAC,CAAC8B,YAAT,KAA0B,QAA1B,GACA9B,CAAC,CAAC8B,YADF,GAEA9B,CAAC,CAAC8B,YAAF,CAAeE,IAAf,CAAoB,IAApB,CALoC;AAAA,CAA1C;;AAMA,OAAO,IAAMzB,kBAES,GAAG,SAFZA,kBAEY,CAACC,iBAAD,EAAuB;AAAA;;AAC9C,kCACEA,iBAAiB,CACdb,GADH,CACO,UAACsC,CAAD,EAAO;AACV,YAAQA,CAAR;AACE,WAAK,kBAAL;AACE,eAAO9C,iBAAiB,CAAC+C,cAAzB;;AACF,WAAK,QAAL;AACA,WAAK,MAAL;AACE,eAAO/C,iBAAiB,CAACgD,IAAzB;;AACF,WAAK,WAAL;AACA,WAAK,WAAL;AACE,eAAOhD,iBAAiB,CAACiD,SAAzB;;AACF,WAAK,OAAL;AACE,eAAOjD,iBAAiB,CAACkD,KAAzB;;AACF,WAAK,QAAL;AACE,eAAOlD,iBAAiB,CAACmD,MAAzB;;AACF;AACE,eAAOC,SAAP;AAdJ;AAgBD,GAlBH,EAmBGC,KAnBH,CAmBS,CAAC,CAnBV,EAoBGC,GApBH,EADF,oCAqBctD,iBAAiB,CAAC+C,cArBhC;AAuBD,CA1BM;;AA2BP,IAAMN,mBAAoD,GAAG,SAAvDA,mBAAuD,CAACD,CAAD,EAAO;AAClE,MAAMP,WAAW,GAAGO,CAAC,CAACe,YAAtB;;AACA,MAAI,CAACtB,WAAL,EAAkB;AAChB,WAAO,qBAAP;AACD;;AACD,UAAQA,WAAR;AACE,SAAK7B,WAAW,CAACmC,QAAjB;AACE,aAAO,WAAP;;AACF,SAAKnC,WAAW,CAACoD,iBAAjB;AACE,aAAO,aAAP;;AACF,SAAKpD,WAAW,CAACiC,OAAjB;AACE,aAAO,qBAAP;;AACF,SAAKjC,WAAW,CAACqD,QAAjB;AACE,aAAO,UAAP;;AACF,SAAKrD,WAAW,CAACsD,OAAjB;AACE,aAAO,UAAP;AAVJ;;AAYA,SAAO,qBAAP;AACD,CAlBD","sourcesContent":["import { OfferProps } from \"../../../pages/api/listing/offers\";\nimport { RequestProps } from \"../../../pages/api/listing/requests\";\nimport { GetOffersListDTO } from \"../../client-api/offers\";\nimport { GetRequestsListDTO } from \"../../client-api/requests\";\nimport { AccommodationTime } from \"../../helpers/FormTypes\";\nimport { MatchState, Offer, Request } from \"./types\";\n\nexport enum Boolean {\n  FALSE = \"FALSE\",\n  TRUE = \"TRUE\",\n}\n\nexport enum GuestHostType {\n  INACTIVE = \"inactive\", // timeout, waiting to move to LOOKING_FOR_MATCH\n  LOOKING_FOR_MATCH = \"looking_for_match\", // new | during matching process\n  FOUND_A_MATCH = \"found_a_match\", // matched with guest/hosts and awaiting for response\n  BEING_CONFIRMED = \"being_confirmed\", // matched confirmed by one side (host or guest)\n  CONFIRMED = \"confirmed\", // match confirmed by two sides (host and guest)\n  REJECTED = \"rejected\", // match rejected by one side\n}\n\nexport enum GuestHostStatus {\n  ACCEPTED = \"accepted\", // default status after creation\n  REJECTED = \"rejected\", // for future moderation purpose\n  BEING_PROCESS = \"being_processed\", // during matching process\n  MATCHED = \"matched\", // matched with guest/hosts and awaiting for response\n  MATCH_ACCEPTED = \"match_accepted\", // match accepted by host and guest\n  DEFAULT = \"default\",\n}\n\nenum MatchStatus {\n  ACCEPTED = \"accepted\", // match accepted by guest and by host\n  REJECTED = \"rejected\", // match rejected by guest or by host\n  TIMEOUT = \"timeout\", // timeout during awaiting for guest and host response\n  AWAITING_RESPONSE = \"awaiting_response\", // match awaiting for guest and host response\n  DEFAULT = \"default\",\n}\n\nexport const toOffers: (xs: GetOffersListDTO) => Offer[] = (xs) =>\n  xs.offers.map(toOffer);\n\nexport const toRequests: (xs: GetRequestsListDTO) => Request[] = (\n  xs: GetRequestsListDTO\n) => xs.requests.map(toRequest);\n\nconst toOffer = (o: OfferProps): Offer => ({\n  id: o.id,\n  imageUrl:\n    \"https://images.contentstack.io/v3/assets/bltec2ed8e3c4b1e16d/bltfbcc7f32e0cd6ff5/617b2ba9b187491e7c56dfca/getting-started-on-airbnb-optimized.jpg\", //TODO: need to be mapped\n  type: o.type,\n  beds: o.beds,\n  city: o.city,\n  duration: toAccomodationTime(o.duration_category),\n  name: toName(o), //TODO: check if name is shelter_type\n  state: toMatchOfferState(o), //TODO: check match state algo\n  matchedRequest: o.matchedRequest,\n  closestCity: o.closest_city,\n  matchId: o.match_id,\n  clientOnly: o.client_only,\n});\nconst toMatchOfferState: (o: OfferProps) => MatchState = (o) => {\n  const matchStatus = o.status;\n  if (!matchStatus) {\n    return \"LOOKING_FOR_A_MATCH\";\n  }\n  switch (matchStatus) {\n    case GuestHostStatus.MATCH_ACCEPTED:\n      return \"CONFIRMED\";\n    case GuestHostStatus.MATCHED:\n      return \"FOUND_MATCH\";\n    case GuestHostStatus.DEFAULT:\n      return \"LOOKING_FOR_A_MATCH\";\n    case GuestHostStatus.BEING_PROCESS:\n      return \"BEING_CONFIRMED\";\n    case GuestHostStatus.ACCEPTED:\n      return \"LOOKING_FOR_A_MATCH\";\n  }\n  return \"LOOKING_FOR_A_MATCH\";\n};\n\nconst toRequest: (r: RequestProps) => Request = (r) => ({\n  type: r.type,\n  id: r.id,\n  beds: r.beds,\n  city: r.city ?? \"N/A\",\n  duration: toAccomodationTime(r.duration_category),\n  state: toMatchRequestState(r),\n  matchedOffer: r.matchedOffer,\n  matchId: r.match_id,\n  clientOnly: r.client_only,\n});\n\nconst toName: (_: OfferProps) => string = (o) =>\n  o.shelter_type.length === 0\n    ? \"N/A\"\n    : typeof o.shelter_type === \"string\"\n    ? o.shelter_type\n    : o.shelter_type.join(\", \");\nexport const toAccomodationTime: (\n  duration_category: string[]\n) => AccommodationTime = (duration_category) => {\n  return (\n    duration_category\n      .map((c) => {\n        switch (c) {\n          case \"less_than_1_week\":\n            return AccommodationTime.LESS_THAN_WEEK;\n          case \"1_week\":\n          case \"week\":\n            return AccommodationTime.WEEK;\n          case \"two_weeks\":\n          case \"2_3_weeks\":\n            return AccommodationTime.TWO_WEEKS;\n          case \"month\":\n            return AccommodationTime.MONTH;\n          case \"longer\":\n            return AccommodationTime.LONGER;\n          default:\n            return undefined;\n        }\n      })\n      .slice(-1)\n      .pop() ?? AccommodationTime.LESS_THAN_WEEK\n  );\n};\nconst toMatchRequestState: (o: RequestProps) => MatchState = (r) => {\n  const matchStatus = r.match_status;\n  if (!matchStatus) {\n    return \"LOOKING_FOR_A_MATCH\";\n  }\n  switch (matchStatus) {\n    case MatchStatus.ACCEPTED:\n      return \"CONFIRMED\";\n    case MatchStatus.AWAITING_RESPONSE:\n      return \"FOUND_MATCH\";\n    case MatchStatus.DEFAULT:\n      return \"LOOKING_FOR_A_MATCH\";\n    case MatchStatus.REJECTED:\n      return \"INACTIVE\";\n    case MatchStatus.TIMEOUT:\n      return \"INACTIVE\";\n  }\n  return \"LOOKING_FOR_A_MATCH\";\n};\n"]},"metadata":{},"sourceType":"module"}