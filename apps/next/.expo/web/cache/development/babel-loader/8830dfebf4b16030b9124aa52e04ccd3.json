{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = useEvent;\n\nvar _createEventHandle = _interopRequireDefault(require(\"../createEventHandle\"));\n\nvar _useLayoutEffect = _interopRequireDefault(require(\"../useLayoutEffect\"));\n\nvar _useStable = _interopRequireDefault(require(\"../useStable\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction useEvent(event, options) {\n  var targetListeners = (0, _useStable.default)(function () {\n    return new Map();\n  });\n  var addListener = (0, _useStable.default)(function () {\n    var addEventListener = (0, _createEventHandle.default)(event, options);\n    return function (target, callback) {\n      var removeTargetListener = targetListeners.get(target);\n\n      if (removeTargetListener != null) {\n        removeTargetListener();\n      }\n\n      if (callback == null) {\n        targetListeners.delete(target);\n      }\n\n      var removeEventListener = addEventListener(target, callback);\n      targetListeners.set(target, removeEventListener);\n      return removeEventListener;\n    };\n  });\n  (0, _useLayoutEffect.default)(function () {\n    return function () {\n      targetListeners.forEach(function (removeListener) {\n        removeListener();\n      });\n      targetListeners.clear();\n    };\n  }, []);\n  return addListener;\n}\n\nmodule.exports = exports.default;","map":{"version":3,"sources":["/Users/stanislav.kovalov/Desktop/uasos/node_modules/react-native-web/dist/cjs/modules/useEvent/index.js"],"names":["exports","__esModule","default","useEvent","_createEventHandle","_interopRequireDefault","require","_useLayoutEffect","_useStable","obj","event","options","targetListeners","Map","addListener","addEventListener","target","callback","removeTargetListener","get","delete","removeEventListener","set","forEach","removeListener","clear","module"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;AACAD,OAAO,CAACE,OAAR,GAAkBC,QAAlB;;AAEA,IAAIC,kBAAkB,GAAGC,sBAAsB,CAACC,OAAO,wBAAR,CAA/C;;AAEA,IAAIC,gBAAgB,GAAGF,sBAAsB,CAACC,OAAO,sBAAR,CAA7C;;AAEA,IAAIE,UAAU,GAAGH,sBAAsB,CAACC,OAAO,gBAAR,CAAvC;;AAEA,SAASD,sBAAT,CAAgCI,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACR,UAAX,GAAwBQ,GAAxB,GAA8B;AAAEP,IAAAA,OAAO,EAAEO;AAAX,GAArC;AAAwD;;AAoB/F,SAASN,QAAT,CAAkBO,KAAlB,EAAyBC,OAAzB,EAAkC;AAChC,MAAIC,eAAe,GAAG,CAAC,GAAGJ,UAAU,CAACN,OAAf,EAAwB,YAAY;AACxD,WAAO,IAAIW,GAAJ,EAAP;AACD,GAFqB,CAAtB;AAGA,MAAIC,WAAW,GAAG,CAAC,GAAGN,UAAU,CAACN,OAAf,EAAwB,YAAY;AACpD,QAAIa,gBAAgB,GAAG,CAAC,GAAGX,kBAAkB,CAACF,OAAvB,EAAgCQ,KAAhC,EAAuCC,OAAvC,CAAvB;AACA,WAAO,UAAUK,MAAV,EAAkBC,QAAlB,EAA4B;AACjC,UAAIC,oBAAoB,GAAGN,eAAe,CAACO,GAAhB,CAAoBH,MAApB,CAA3B;;AAEA,UAAIE,oBAAoB,IAAI,IAA5B,EAAkC;AAChCA,QAAAA,oBAAoB;AACrB;;AAED,UAAID,QAAQ,IAAI,IAAhB,EAAsB;AACpBL,QAAAA,eAAe,CAACQ,MAAhB,CAAuBJ,MAAvB;AACD;;AAED,UAAIK,mBAAmB,GAAGN,gBAAgB,CAACC,MAAD,EAASC,QAAT,CAA1C;AACAL,MAAAA,eAAe,CAACU,GAAhB,CAAoBN,MAApB,EAA4BK,mBAA5B;AACA,aAAOA,mBAAP;AACD,KAdD;AAeD,GAjBiB,CAAlB;AAkBA,GAAC,GAAGd,gBAAgB,CAACL,OAArB,EAA8B,YAAY;AACxC,WAAO,YAAY;AACjBU,MAAAA,eAAe,CAACW,OAAhB,CAAwB,UAAUC,cAAV,EAA0B;AAChDA,QAAAA,cAAc;AACf,OAFD;AAGAZ,MAAAA,eAAe,CAACa,KAAhB;AACD,KALD;AAMD,GAPD,EAOG,EAPH;AAQA,SAAOX,WAAP;AACD;;AAEDY,MAAM,CAAC1B,OAAP,GAAiBA,OAAO,CAACE,OAAzB","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = useEvent;\n\nvar _createEventHandle = _interopRequireDefault(require(\"../createEventHandle\"));\n\nvar _useLayoutEffect = _interopRequireDefault(require(\"../useLayoutEffect\"));\n\nvar _useStable = _interopRequireDefault(require(\"../useStable\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\n/**\n * This can be used with any event type include custom events.\n *\n * const click = useEvent('click', options);\n * useEffect(() => {\n *   click.setListener(target, onClick);\n *   return () => click.clear();\n * }).\n */\nfunction useEvent(event, options) {\n  var targetListeners = (0, _useStable.default)(function () {\n    return new Map();\n  });\n  var addListener = (0, _useStable.default)(function () {\n    var addEventListener = (0, _createEventHandle.default)(event, options);\n    return function (target, callback) {\n      var removeTargetListener = targetListeners.get(target);\n\n      if (removeTargetListener != null) {\n        removeTargetListener();\n      }\n\n      if (callback == null) {\n        targetListeners.delete(target);\n      }\n\n      var removeEventListener = addEventListener(target, callback);\n      targetListeners.set(target, removeEventListener);\n      return removeEventListener;\n    };\n  });\n  (0, _useLayoutEffect.default)(function () {\n    return function () {\n      targetListeners.forEach(function (removeListener) {\n        removeListener();\n      });\n      targetListeners.clear();\n    };\n  }, []);\n  return addListener;\n}\n\nmodule.exports = exports.default;"]},"metadata":{},"sourceType":"script"}