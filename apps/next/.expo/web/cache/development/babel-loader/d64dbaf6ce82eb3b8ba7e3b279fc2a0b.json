{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.setResponderId = setResponderId;\nexports.getResponderPaths = getResponderPaths;\nexports.getLowestCommonAncestor = getLowestCommonAncestor;\nexports.hasTargetTouches = hasTargetTouches;\nexports.hasValidSelection = hasValidSelection;\nexports.isPrimaryPointerDown = isPrimaryPointerDown;\n\nvar _isSelectionValid = _interopRequireDefault(require(\"../../modules/isSelectionValid\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar keyName = '__reactResponderId';\n\nfunction getEventPath(domEvent) {\n  if (domEvent.type === 'selectionchange') {\n    var target = window.getSelection().anchorNode;\n    return composedPathFallback(target);\n  } else {\n    var path = domEvent.composedPath != null ? domEvent.composedPath() : composedPathFallback(domEvent.target);\n    return path;\n  }\n}\n\nfunction composedPathFallback(target) {\n  var path = [];\n\n  while (target != null && target !== document.body) {\n    path.push(target);\n    target = target.parentNode;\n  }\n\n  return path;\n}\n\nfunction getResponderId(node) {\n  if (node != null) {\n    return node[keyName];\n  }\n\n  return null;\n}\n\nfunction setResponderId(node, id) {\n  if (node != null) {\n    node[keyName] = id;\n  }\n}\n\nfunction getResponderPaths(domEvent) {\n  var idPath = [];\n  var nodePath = [];\n  var eventPath = getEventPath(domEvent);\n\n  for (var i = 0; i < eventPath.length; i++) {\n    var node = eventPath[i];\n    var id = getResponderId(node);\n\n    if (id != null) {\n      idPath.push(id);\n      nodePath.push(node);\n    }\n  }\n\n  return {\n    idPath: idPath,\n    nodePath: nodePath\n  };\n}\n\nfunction getLowestCommonAncestor(pathA, pathB) {\n  var pathALength = pathA.length;\n  var pathBLength = pathB.length;\n\n  if (pathALength === 0 || pathBLength === 0 || pathA[pathALength - 1] !== pathB[pathBLength - 1]) {\n    return null;\n  }\n\n  var itemA = pathA[0];\n  var indexA = 0;\n  var itemB = pathB[0];\n  var indexB = 0;\n\n  if (pathALength - pathBLength > 0) {\n    indexA = pathALength - pathBLength;\n    itemA = pathA[indexA];\n    pathALength = pathBLength;\n  }\n\n  if (pathBLength - pathALength > 0) {\n    indexB = pathBLength - pathALength;\n    itemB = pathB[indexB];\n    pathBLength = pathALength;\n  }\n\n  var depth = pathALength;\n\n  while (depth--) {\n    if (itemA === itemB) {\n      return itemA;\n    }\n\n    itemA = pathA[indexA++];\n    itemB = pathB[indexB++];\n  }\n\n  return null;\n}\n\nfunction hasTargetTouches(target, touches) {\n  if (!touches || touches.length === 0) {\n    return false;\n  }\n\n  for (var i = 0; i < touches.length; i++) {\n    var node = touches[i].target;\n\n    if (node != null) {\n      if (target.contains(node)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction hasValidSelection(domEvent) {\n  if (domEvent.type === 'selectionchange') {\n    return (0, _isSelectionValid.default)();\n  }\n\n  return domEvent.type === 'select';\n}\n\nfunction isPrimaryPointerDown(domEvent) {\n  var altKey = domEvent.altKey,\n      button = domEvent.button,\n      buttons = domEvent.buttons,\n      ctrlKey = domEvent.ctrlKey,\n      type = domEvent.type;\n  var isTouch = type === 'touchstart' || type === 'touchmove';\n  var isPrimaryMouseDown = type === 'mousedown' && (button === 0 || buttons === 1);\n  var isPrimaryMouseMove = type === 'mousemove' && buttons === 1;\n  var noModifiers = altKey === false && ctrlKey === false;\n\n  if (isTouch || isPrimaryMouseDown && noModifiers || isPrimaryMouseMove && noModifiers) {\n    return true;\n  }\n\n  return false;\n}","map":{"version":3,"sources":["/Users/stanislav.kovalov/Desktop/uasos/node_modules/react-native-web/dist/cjs/modules/useResponderEvents/utils.js"],"names":["exports","__esModule","setResponderId","getResponderPaths","getLowestCommonAncestor","hasTargetTouches","hasValidSelection","isPrimaryPointerDown","_isSelectionValid","_interopRequireDefault","require","obj","default","keyName","getEventPath","domEvent","type","target","window","getSelection","anchorNode","composedPathFallback","path","composedPath","document","body","push","parentNode","getResponderId","node","id","idPath","nodePath","eventPath","i","length","pathA","pathB","pathALength","pathBLength","itemA","indexA","itemB","indexB","depth","touches","contains","altKey","button","buttons","ctrlKey","isTouch","isPrimaryMouseDown","isPrimaryMouseMove","noModifiers"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.setResponderId = setResponderId;\nexports.getResponderPaths = getResponderPaths;\nexports.getLowestCommonAncestor = getLowestCommonAncestor;\nexports.hasTargetTouches = hasTargetTouches;\nexports.hasValidSelection = hasValidSelection;\nexports.isPrimaryPointerDown = isPrimaryPointerDown;\n\nvar _isSelectionValid = _interopRequireDefault(require(\"../../modules/isSelectionValid\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (c) Nicolas Gallagher\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\nvar keyName = '__reactResponderId';\n\nfunction getEventPath(domEvent) {\n  // The 'selectionchange' event always has the 'document' as the target.\n  // Use the anchor node as the initial target to reconstruct a path.\n  // (We actually only need the first \"responder\" node in practice.)\n  if (domEvent.type === 'selectionchange') {\n    var target = window.getSelection().anchorNode;\n    return composedPathFallback(target);\n  } else {\n    var path = domEvent.composedPath != null ? domEvent.composedPath() : composedPathFallback(domEvent.target);\n    return path;\n  }\n}\n\nfunction composedPathFallback(target) {\n  var path = [];\n\n  while (target != null && target !== document.body) {\n    path.push(target);\n    target = target.parentNode;\n  }\n\n  return path;\n}\n/**\n * Retrieve the responderId from a host node\n */\n\n\nfunction getResponderId(node) {\n  if (node != null) {\n    return node[keyName];\n  }\n\n  return null;\n}\n/**\n * Store the responderId on a host node\n */\n\n\nfunction setResponderId(node, id) {\n  if (node != null) {\n    node[keyName] = id;\n  }\n}\n/**\n * Filter the event path to contain only the nodes attached to the responder system\n */\n\n\nfunction getResponderPaths(domEvent) {\n  var idPath = [];\n  var nodePath = [];\n  var eventPath = getEventPath(domEvent);\n\n  for (var i = 0; i < eventPath.length; i++) {\n    var node = eventPath[i];\n    var id = getResponderId(node);\n\n    if (id != null) {\n      idPath.push(id);\n      nodePath.push(node);\n    }\n  }\n\n  return {\n    idPath: idPath,\n    nodePath: nodePath\n  };\n}\n/**\n * Walk the paths and find the first common ancestor\n */\n\n\nfunction getLowestCommonAncestor(pathA, pathB) {\n  var pathALength = pathA.length;\n  var pathBLength = pathB.length;\n\n  if ( // If either path is empty\n  pathALength === 0 || pathBLength === 0 || // If the last elements aren't the same there can't be a common ancestor\n  // that is connected to the responder system\n  pathA[pathALength - 1] !== pathB[pathBLength - 1]) {\n    return null;\n  }\n\n  var itemA = pathA[0];\n  var indexA = 0;\n  var itemB = pathB[0];\n  var indexB = 0; // If A is deeper, skip indices that can't match.\n\n  if (pathALength - pathBLength > 0) {\n    indexA = pathALength - pathBLength;\n    itemA = pathA[indexA];\n    pathALength = pathBLength;\n  } // If B is deeper, skip indices that can't match\n\n\n  if (pathBLength - pathALength > 0) {\n    indexB = pathBLength - pathALength;\n    itemB = pathB[indexB];\n    pathBLength = pathALength;\n  } // Walk in lockstep until a match is found\n\n\n  var depth = pathALength;\n\n  while (depth--) {\n    if (itemA === itemB) {\n      return itemA;\n    }\n\n    itemA = pathA[indexA++];\n    itemB = pathB[indexB++];\n  }\n\n  return null;\n}\n/**\n * Determine whether any of the active touches are within the current responder.\n * This cannot rely on W3C `targetTouches`, as neither IE11 nor Safari implement it.\n */\n\n\nfunction hasTargetTouches(target, touches) {\n  if (!touches || touches.length === 0) {\n    return false;\n  }\n\n  for (var i = 0; i < touches.length; i++) {\n    var node = touches[i].target;\n\n    if (node != null) {\n      if (target.contains(node)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n/**\n * Ignore 'selectionchange' events that don't correspond with a person's intent to\n * select text.\n */\n\n\nfunction hasValidSelection(domEvent) {\n  if (domEvent.type === 'selectionchange') {\n    return (0, _isSelectionValid.default)();\n  }\n\n  return domEvent.type === 'select';\n}\n/**\n * Events are only valid if the primary button was used without specific modifier keys.\n */\n\n\nfunction isPrimaryPointerDown(domEvent) {\n  var altKey = domEvent.altKey,\n      button = domEvent.button,\n      buttons = domEvent.buttons,\n      ctrlKey = domEvent.ctrlKey,\n      type = domEvent.type;\n  var isTouch = type === 'touchstart' || type === 'touchmove';\n  var isPrimaryMouseDown = type === 'mousedown' && (button === 0 || buttons === 1);\n  var isPrimaryMouseMove = type === 'mousemove' && buttons === 1;\n  var noModifiers = altKey === false && ctrlKey === false;\n\n  if (isTouch || isPrimaryMouseDown && noModifiers || isPrimaryMouseMove && noModifiers) {\n    return true;\n  }\n\n  return false;\n}"]},"metadata":{},"sourceType":"script"}