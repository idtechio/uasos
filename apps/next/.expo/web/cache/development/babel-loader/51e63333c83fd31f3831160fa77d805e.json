{"ast":null,"code":"import { SignInMethod } from \"firebase/auth\";\nimport { useContext } from \"react\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { AuthContext } from \"../../pages/_app\";\nimport { AccountApi } from \"../client-api/account\";\nimport { API_REFRESH_LATENCY } from \"../helpers/misc\";\nimport { Authorization } from \"../hooks/useAuth\";\nimport { QueryKeys } from \"./queryKeys\";\nexport var useEditAccount = function useEditAccount() {\n  var _useContext = useContext(AuthContext),\n      refetchAccount = _useContext.refetchAccount;\n\n  return useMutation(AccountApi.updateAccount, {\n    onSuccess: function onSuccess() {\n      setTimeout(function () {\n        refetchAccount && refetchAccount();\n      }, API_REFRESH_LATENCY);\n    }\n  });\n};\n\nvar useGetSignInMethods = function useGetSignInMethods() {\n  return useQuery([QueryKeys.SIGN_IN_METHODS], Authorization.getSignInMethods, {\n    refetchOnMount: true\n  });\n};\n\nexport var useCanEditEmail = function useCanEditEmail() {\n  var _useGetSignInMethods = useGetSignInMethods(),\n      data = _useGetSignInMethods.data;\n\n  var can = !(data != null && data.some(function (value) {\n    return [SignInMethod.FACEBOOK, SignInMethod.GOOGLE].includes(value);\n  }));\n  return can;\n};","map":{"version":3,"sources":["/Users/stanislav.kovalov/Desktop/uasos/apps/next/src/queries/useAccount.ts"],"names":["SignInMethod","useContext","useMutation","useQuery","AuthContext","AccountApi","API_REFRESH_LATENCY","Authorization","QueryKeys","useEditAccount","refetchAccount","updateAccount","onSuccess","setTimeout","useGetSignInMethods","SIGN_IN_METHODS","getSignInMethods","refetchOnMount","useCanEditEmail","data","can","some","value","FACEBOOK","GOOGLE","includes"],"mappings":"AAAA,SAASA,YAAT,QAA6B,eAA7B;AACA,SAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,aAAtC;AACA,SAASC,WAAT;AACA,SAASC,UAAT;AACA,SAASC,mBAAT;AACA,SAASC,aAAT;AACA,SAASC,SAAT;AAEA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAClC,oBAA2BR,UAAU,CAACG,WAAD,CAArC;AAAA,MAAQM,cAAR,eAAQA,cAAR;;AACA,SAAOR,WAAW,CAACG,UAAU,CAACM,aAAZ,EAA2B;AAC3CC,IAAAA,SAAS,EAAE,qBAAM;AACfC,MAAAA,UAAU,CAAC,YAAM;AACfH,QAAAA,cAAc,IAAIA,cAAc,EAAhC;AACD,OAFS,EAEPJ,mBAFO,CAAV;AAGD;AAL0C,GAA3B,CAAlB;AAOD,CATM;;AAWP,IAAMQ,mBAAmB,GAAG,SAAtBA,mBAAsB;AAAA,SAC1BX,QAAQ,CAAC,CAACK,SAAS,CAACO,eAAX,CAAD,EAA8BR,aAAa,CAACS,gBAA5C,EAA8D;AACpEC,IAAAA,cAAc,EAAE;AADoD,GAA9D,CADkB;AAAA,CAA5B;;AAQA,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AACnC,6BAAiBJ,mBAAmB,EAApC;AAAA,MAAQK,IAAR,wBAAQA,IAAR;;AACA,MAAMC,GAAG,GAAG,EAACD,IAAD,YAACA,IAAI,CAAEE,IAAN,CAAW,UAACC,KAAD;AAAA,WACtB,CAACtB,YAAY,CAACuB,QAAd,EAAwBvB,YAAY,CAACwB,MAArC,EAA6CC,QAA7C,CACEH,KADF,CADsB;AAAA,GAAX,CAAD,CAAZ;AAMA,SAAOF,GAAP;AACD,CATM","sourcesContent":["import { SignInMethod } from \"firebase/auth\";\nimport React, { useContext } from \"react\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { AuthContext } from \"../../pages/_app\";\nimport { AccountApi } from \"../client-api/account\";\nimport { API_REFRESH_LATENCY } from \"../helpers/misc\";\nimport { Authorization } from \"../hooks/useAuth\";\nimport { QueryKeys } from \"./queryKeys\";\n\nexport const useEditAccount = () => {\n  const { refetchAccount } = useContext(AuthContext);\n  return useMutation(AccountApi.updateAccount, {\n    onSuccess: () => {\n      setTimeout(() => {\n        refetchAccount && refetchAccount();\n      }, API_REFRESH_LATENCY);\n    },\n  });\n};\n\nconst useGetSignInMethods = () =>\n  useQuery([QueryKeys.SIGN_IN_METHODS], Authorization.getSignInMethods, {\n    refetchOnMount: true,\n  });\n\ntype Keys = \"GOOGLE\" | \"FACEBOOK\";\ntype SignInValueType = typeof SignInMethod[Keys];\n\nexport const useCanEditEmail = () => {\n  const { data } = useGetSignInMethods();\n  const can = !data?.some((value) =>\n    [SignInMethod.FACEBOOK, SignInMethod.GOOGLE].includes(\n      value as SignInValueType\n    )\n  );\n\n  return can;\n};\n"]},"metadata":{},"sourceType":"module"}