{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { getFirebaseToken } from \"./getFirebaseToken\";\nexport default function addHostToApi(host) {\n  var token;\n  return _regeneratorRuntime.async(function addHostToApi$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(getFirebaseToken());\n\n        case 2:\n          token = _context.sent;\n          return _context.abrupt(\"return\", fetch(process.env.NEXT_PUBLIC_DOMAIN + \"api/hosts/add\", {\n            method: \"post\",\n            body: JSON.stringify(host),\n            headers: {\n              \"content-type\": \"application/json\",\n              Authorization: \"Bearer \" + token\n            }\n          }).then(function (res) {\n            if (res.status === 200) {\n              return true;\n            }\n\n            throw new Error(\"Couldn't add host to api\");\n          }));\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}","map":{"version":3,"sources":["/Users/stanislav.kovalov/Desktop/uasos/apps/next/src/helpers/addHostToApi.ts"],"names":["getFirebaseToken","addHostToApi","host","token","fetch","process","env","NEXT_PUBLIC_DOMAIN","method","body","JSON","stringify","headers","Authorization","then","res","status","Error"],"mappings":";AACA,SAASA,gBAAT;AAEA,eAAe,SAAeC,YAAf,CAA4BC,IAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACOF,gBAAgB,EADvB;;AAAA;AACPG,UAAAA,KADO;AAAA,2CAENC,KAAK,CAACC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GAAiC,eAAlC,EAAmD;AAC7DC,YAAAA,MAAM,EAAE,MADqD;AAE7DC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf,CAFuD;AAG7DU,YAAAA,OAAO,EAAE;AACP,8BAAgB,kBADT;AAEPC,cAAAA,aAAa,cAAYV;AAFlB;AAHoD,WAAnD,CAAL,CAOJW,IAPI,CAOC,UAAUC,GAAV,EAAe;AACrB,gBAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB,qBAAO,IAAP;AACD;;AACD,kBAAM,IAAIC,KAAJ,CAAU,0BAAV,CAAN;AACD,WAZM,CAFM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { HostProps } from \"../../pages/api/hosts/add\";\nimport { getFirebaseToken } from \"./getFirebaseToken\";\n\nexport default async function addHostToApi(host: HostProps) {\n  const token = await getFirebaseToken();\n  return fetch(process.env.NEXT_PUBLIC_DOMAIN + \"api/hosts/add\", {\n    method: \"post\",\n    body: JSON.stringify(host),\n    headers: {\n      \"content-type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  }).then(function (res) {\n    if (res.status === 200) {\n      return true;\n    }\n    throw new Error(\"Couldn't add host to api\");\n  });\n}\n"]},"metadata":{},"sourceType":"module"}