{"version":3,"sources":["use-map-animate-to-style.ts"],"names":["PresenceContext","usePresence","useCallback","useContext","useEffect","useAnimatedStyle","useSharedValue","withDecay","withSpring","withTiming","withDelay","withRepeat","withSequence","runOnJS","PackageName","debug","args","isColor","styleKey","keys","backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","shadowColor","borderColor","borderEndColor","borderStartColor","Boolean","isTransform","transforms","perspective","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","translateX","translateY","skewX","skewY","animationDelay","_key","transition","defaultDelay","key","delayMs","delay","animationConfig","styleProp","repeatCount","repeatReverse","animationType","styleSpecificTransition","type","loop","repeat","config","animation","props","duration","easing","configKeys","configKey","styleSpecificConfig","transitionConfigForKey","velocity","deceleration","shouldRepeat","useMotify","animate","animateProp","from","fromProp","transitionProp","exitTransition","exitTransitionProp","state","stylePriority","onDidAnimate","exit","exitProp","animateInitialState","isMounted","isPresent","safeToUnmount","presence","disableInitialAnimation","initial","custom","reanimatedSafeToUnmount","reanimatedOnDidAnimated","hasExitStyle","Object","length","style","final","transform","variantStyle","__state","value","animateStyle","initialStyle","exitStyle","isExiting","mergedStyles","assign","exitingStyleProps","callback","completed","recentValue","attemptedValue","areStylesExiting","values","some","getSequenceArray","sequenceKey","sequenceArray","sequence","step","shouldPush","stepDelay","stepValue","stepConfig","stepAnimation","stepTransition","inlineStepConfig","sequenceValue","push","Array","isArray","console","error","transformObject","transformKey","transformValue","finalValue","slice","innerStyleKey","allowUnMountIfMissingExit"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,WAA1B,QAA6C,eAA7C;AACA,SAASC,WAAT,EAAsBC,UAAtB,EAAkCC,SAAlC,QAAmD,OAAnD;AAEA,SACEC,gBADF,EAEEC,cAFF,EAGEC,SAHF,EAIEC,UAJF,EAKEC,UALF,EAMEC,SANF,EAOEC,UAPF,EAQEC,YARF,EASEC,OATF,QAUO,yBAVP;AAgBA,SAASC,WAAT,QAA4B,0BAA5B;;AASA,MAAMC,KAAK,GAAG,CAAC,GAAGC,IAAJ,KAAoB;AAChC;;AACA,MAAIA,IAAJ,EAAU,CACR;AACD,GAJ+B,CAKhC;;AACD,CAND;;AAQA,MAAMC,OAAO,GAAIC,QAAD,IAAsB;AACpC;;AACA,QAAMC,IAAI,GAAG;AACXC,IAAAA,eAAe,EAAE,IADN;AAEXC,IAAAA,iBAAiB,EAAE,IAFR;AAGXC,IAAAA,eAAe,EAAE,IAHN;AAIXC,IAAAA,gBAAgB,EAAE,IAJP;AAKXC,IAAAA,cAAc,EAAE,IALL;AAMXC,IAAAA,KAAK,EAAE,IANI;AAOXC,IAAAA,WAAW,EAAE,IAPF;AAQXC,IAAAA,WAAW,EAAE,IARF;AASXC,IAAAA,cAAc,EAAE,IATL;AAUXC,IAAAA,gBAAgB,EAAE;AAVP,GAAb;AAaA,SAAOC,OAAO,CAACX,IAAI,CAACD,QAAD,CAAL,CAAd;AACD,CAhBD;;AAkBA,MAAMa,WAAW,GAAIb,QAAD,IAAsB;AACxC;;AAEA,QAAMc,UAA0C,GAAG;AACjDC,IAAAA,WAAW,EAAE,IADoC;AAEjDC,IAAAA,MAAM,EAAE,IAFyC;AAGjDC,IAAAA,OAAO,EAAE,IAHwC;AAIjDC,IAAAA,OAAO,EAAE,IAJwC;AAKjDC,IAAAA,OAAO,EAAE,IALwC;AAMjDC,IAAAA,KAAK,EAAE,IAN0C;AAOjDC,IAAAA,MAAM,EAAE,IAPyC;AAQjDC,IAAAA,MAAM,EAAE,IARyC;AASjDC,IAAAA,UAAU,EAAE,IATqC;AAUjDC,IAAAA,UAAU,EAAE,IAVqC;AAWjDC,IAAAA,KAAK,EAAE,IAX0C;AAYjDC,IAAAA,KAAK,EAAE;AAZ0C,GAAnD;AAeA,SAAOd,OAAO,CAACE,UAAU,CAACd,QAAD,CAAX,CAAd;AACD,CAnBD;;AAqBA,SAAS2B,cAAT,CACEC,IADF,EAEEC,UAFF,EAGEC,YAHF,EAIE;AACA;;AADA;;AAEA,QAAMC,GAAG,GAAGH,IAAZ;AACA,MAAII,OAAkC,GAAGF,YAAzC;;AAEA,MAAI,CAAAD,UAAU,SAAV,IAAAA,UAAU,WAAV,+BAAAA,UAAU,CAAGE,GAAH,CAAV,oEAAmBE,KAAnB,KAA4B,IAAhC,EAAsC;AAAA;;AACpCD,IAAAA,OAAO,GAAGH,UAAH,aAAGA,UAAH,2CAAGA,UAAU,CAAGE,GAAH,CAAb,qDAAG,iBAAmBE,KAA7B;AACD,GAFD,MAEO,IAAI,CAAAJ,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAEI,KAAZ,KAAqB,IAAzB,EAA+B;AACpCD,IAAAA,OAAO,GAAGH,UAAU,CAACI,KAArB;AACD;;AAED,SAAO;AACLD,IAAAA;AADK,GAAP;AAGD;;AAED,SAASE,eAAT,CACEC,SADF,EAEEN,UAFF,EAGE;AACA;;AADA;;AAGA,QAAME,GAAG,GAAGI,SAAZ;AACA,MAAIC,WAAW,GAAG,CAAlB;AACA,MAAIC,aAAa,GAAG,IAApB;AAEA,MAAIC,aAAiD,GAAG,QAAxD;AACA,MAAIvC,OAAO,CAACgC,GAAD,CAAP,IAAgBA,GAAG,KAAK,SAA5B,EAAuCO,aAAa,GAAG,QAAhB;AAEvC,QAAMC,uBAAuB,GAAGV,UAAH,aAAGA,UAAH,uBAAGA,UAAU,CAAGE,GAAH,CAA1C,CAVA,CAYA;AACA;;AAEA,MAAIQ,uBAAJ,aAAIA,uBAAJ,eAAIA,uBAAuB,CAAEC,IAA7B,EAAmC;AACjCF,IAAAA,aAAa,GAAGC,uBAAuB,CAACC,IAAxC;AACD,GAFD,MAEO,IAAIX,UAAJ,aAAIA,UAAJ,eAAIA,UAAU,CAAEW,IAAhB,EAAsB;AAC3B;AACAF,IAAAA,aAAa,GAAGT,UAAU,CAACW,IAA3B;AACD;;AAED,QAAMC,IAAI,4BAAGF,uBAAH,aAAGA,uBAAH,uBAAGA,uBAAuB,CAAEE,IAA5B,yEAAoCZ,UAApC,aAAoCA,UAApC,uBAAoCA,UAAU,CAAEY,IAA1D;;AAEA,MAAIA,IAAI,IAAI,IAAZ,EAAkB;AAChBL,IAAAA,WAAW,GAAGK,IAAI,GAAG,CAAC,CAAJ,GAAQ,CAA1B;AACD;;AAED,MAAI,CAAAF,uBAAuB,SAAvB,IAAAA,uBAAuB,WAAvB,YAAAA,uBAAuB,CAAEG,MAAzB,KAAmC,IAAvC,EAA6C;AAC3CN,IAAAA,WAAW,GAAGG,uBAAH,aAAGA,uBAAH,uBAAGA,uBAAuB,CAAEG,MAAvC;AACD,GAFD,MAEO,IAAI,CAAAb,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAEa,MAAZ,KAAsB,IAA1B,EAAgC;AACrCN,IAAAA,WAAW,GAAGP,UAAU,CAACa,MAAzB;AACD;;AAED,MAAI,CAAAH,uBAAuB,SAAvB,IAAAA,uBAAuB,WAAvB,YAAAA,uBAAuB,CAAEF,aAAzB,KAA0C,IAA9C,EAAoD;AAClDA,IAAAA,aAAa,GAAGE,uBAAuB,CAACF,aAAxC;AACD,GAFD,MAEO,IAAI,CAAAR,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAEQ,aAAZ,KAA6B,IAAjC,EAAuC;AAC5CA,IAAAA,aAAa,GAAGR,UAAU,CAACQ,aAA3B;AACD;;AAEDxC,EAAAA,KAAK,CAAC;AAAE4C,IAAAA,IAAF;AAAQV,IAAAA,GAAR;AAAaK,IAAAA,WAAb;AAA0BE,IAAAA;AAA1B,GAAD,CAAL;AAEA,MAAIK,MAAM,GAAG,EAAb,CA1CA,CA2CA;;AACA,MAAIC,SAAS,GAAG,CAAC,GAAGC,KAAJ,KAAwBA,KAAxC;;AAEA,MAAIP,aAAa,KAAK,QAAtB,EAAgC;AAAA;;AAC9B,UAAMQ,QAAQ,gBACXjB,UADW,aACXA,UADW,2CACXA,UAAU,CAAGE,GAAH,CADC,qDACZ,iBAAqDe,QADzC,iDAEXjB,UAFW,aAEXA,UAFW,uBAEXA,UAAD,CAA8CiB,QAFhD;AAIA,UAAMC,MAAM,cACTlB,UADS,aACTA,UADS,2CACTA,UAAU,CAAGE,GAAH,CADD,qDACV,iBAAqDgB,MAD3C,6CAETlB,UAFS,aAETA,UAFS,uBAETA,UAAD,CAA8CkB,MAFhD;;AAIA,QAAIA,MAAJ,EAAY;AACVJ,MAAAA,MAAM,CAAC,QAAD,CAAN,GAAmBI,MAAnB;AACD;;AACD,QAAID,QAAQ,IAAI,IAAhB,EAAsB;AACpBH,MAAAA,MAAM,CAAC,UAAD,CAAN,GAAqBG,QAArB;AACD;;AACDF,IAAAA,SAAS,GAAGrD,UAAZ;AACD,GAhBD,MAgBO,IAAI+C,aAAa,KAAK,QAAtB,EAAgC;AACrCM,IAAAA,SAAS,GAAGtD,UAAZ;AACAqD,IAAAA,MAAM,GAAG,EAAT;AACA,UAAMK,UAAsC,GAAG,CAC7C,SAD6C,EAE7C,MAF6C,EAG7C,mBAH6C,EAI7C,2BAJ6C,EAK7C,oBAL6C,EAM7C,WAN6C,EAO7C,UAP6C,CAA/C;;AASA,SAAK,MAAMC,SAAX,IAAwBD,UAAxB,EAAoC;AAAA;;AAClC,YAAME,mBAAmB,GAAGrB,UAAH,aAAGA,UAAH,2CAAGA,UAAU,CAAGE,GAAH,CAAb,qDAAG,iBAAoBkB,SAApB,CAA5B;AACA,YAAME,sBAAsB,GAAGtB,UAAH,aAAGA,UAAH,uBAAGA,UAAU,CAAGoB,SAAH,CAAzC;;AAEA,UAAIC,mBAAmB,IAAI,IAA3B,EAAiC;AAC/BP,QAAAA,MAAM,CAACM,SAAD,CAAN,GAAoBC,mBAApB;AACD,OAFD,MAEO,IAAIC,sBAAsB,IAAI,IAA9B,EAAoC;AACzCR,QAAAA,MAAM,CAACM,SAAD,CAAN,GAAoBE,sBAApB;AACD;AACF;AACF,GAtBM,MAsBA,IAAIb,aAAa,KAAK,OAAtB,EAA+B;AACpCM,IAAAA,SAAS,GAAGvD,SAAZ;AACAsD,IAAAA,MAAM,GAAG;AACPS,MAAAA,QAAQ,EAAE,CADH;AAEPC,MAAAA,YAAY,EAAE;AAFP,KAAT;AAIA,UAAML,UAAqC,GAAG,CAC5C,OAD4C,EAE5C,UAF4C,EAG5C,cAH4C,EAI5C,gBAJ4C,CAA9C;;AAMA,SAAK,MAAMC,SAAX,IAAwBD,UAAxB,EAAoC;AAAA;;AAClC;AACA,YAAME,mBAAmB,GAAGrB,UAAH,aAAGA,UAAH,2CAAGA,UAAU,CAAGE,GAAH,CAAb,qDAAG,iBAAoBkB,SAApB,CAA5B;AACA,YAAME,sBAAsB,GAAGtB,UAAH,aAAGA,UAAH,uBAAGA,UAAU,CAAGoB,SAAH,CAAzC;;AAEA,UAAIC,mBAAmB,IAAI,IAA3B,EAAiC;AAC/BP,QAAAA,MAAM,CAACM,SAAD,CAAN,GAAoBC,mBAApB;AACD,OAFD,MAEO,IAAIC,sBAAsB,IAAI,IAA9B,EAAoC;AACzCR,QAAAA,MAAM,CAACM,SAAD,CAAN,GAAoBE,sBAApB;AACD;AACF;AACF;;AAED,SAAO;AACLP,IAAAA,SADK;AAELD,IAAAA,MAFK;AAGLN,IAAAA,aAHK;AAILD,IAAAA,WAJK;AAKLkB,IAAAA,YAAY,EAAE,CAAC,CAAClB;AALX,GAAP;AAOD;;AAED,OAAO,SAASmB,SAAT,CAA4B;AACjCC,EAAAA,OAAO,EAAEC,WADwB;AAEjCC,EAAAA,IAAI,EAAEC,QAAQ,GAAG,KAFgB;AAGjC9B,EAAAA,UAAU,EAAE+B,cAHqB;AAIjCC,EAAAA,cAAc,EAAEC,kBAJiB;AAKjC7B,EAAAA,KAAK,EAAEH,YAL0B;AAMjCiC,EAAAA,KANiC;AAOjCC,EAAAA,aAAa,GAAG,SAPiB;AAQjCC,EAAAA,YARiC;AASjCC,EAAAA,IAAI,EAAEC,QAT2B;AAUjCC,EAAAA,mBAAmB,GAAG;AAVW,CAA5B,EAWgB;AACrB,QAAMC,SAAS,GAAGjF,cAAc,CAAC,KAAD,CAAhC;AACA,QAAM,CAACkF,SAAD,EAAYC,aAAZ,IAA6BxF,WAAW,EAA9C;AACA,QAAMyF,QAAQ,GAAGvF,UAAU,CAACH,eAAD,CAA3B;AAEA,QAAM2F,uBAAuB,GAC3B,CAAAD,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEE,OAAV,MAAsB,KAAtB,IAA+B,CAACN,mBADlC;AAEA,QAAMO,MAAM,GAAG3F,WAAW,CAAC,MAAM;AAC/B;;AACA,WAAOwF,QAAP,aAAOA,QAAP,uBAAOA,QAAQ,CAAEG,MAAjB;AACD,GAHyB,EAGvB,CAACH,QAAD,CAHuB,CAA1B;AAKA,QAAMI,uBAAuB,GAAG5F,WAAW,CAAC,MAAM;AAChDuF,IAAAA,aAAa,SAAb,IAAAA,aAAa,WAAb,YAAAA,aAAa;AACd,GAF0C,EAExC,CAACA,aAAD,CAFwC,CAA3C;AAIA,QAAMM,uBAAuB,GAAG7F,WAAW,CACzC,CAAC,GAAGc,IAAJ,KAAa;AACXmE,IAAAA,YAAY,SAAZ,IAAAA,YAAY,WAAZ,YAAAA,YAAY,CAAG,GAAGnE,IAAN,CAAZ;AACD,GAHwC,EAIzC,CAACmE,YAAD,CAJyC,CAA3C;AAOA,QAAMa,YAAY,GAAGlE,OAAO,CAC1B,OAAOuD,QAAP,KAAoB,UAApB,IACG,OAAOA,QAAP,KAAoB,QAApB,IACCA,QADD,IAECY,MAAM,CAAC9E,IAAP,CAAYkE,QAAZ,EAAsBa,MAAtB,GAA+B,CAJT,CAA5B;AAOA,QAAMC,KAAK,GAAG9F,gBAAgB,CAAC,MAAM;AAAA;;AACnC,UAAM+F,KAAK,GAAG;AACZ;AACAC,MAAAA,SAAS,EAAE;AAFC,KAAd;AAIA,UAAMC,YAAqB,GAAG,CAAArB,KAAK,SAAL,IAAAA,KAAK,WAAL,8BAAAA,KAAK,CAAEsB,OAAP,kEAAgBC,KAAhB,KAAyB,EAAvD;AAEA,QAAIC,YAAJ;;AAEA,QAAI9B,WAAW,IAAI,WAAWA,WAA9B,EAA2C;AACzC8B,MAAAA,YAAY,GAAI9B,WAAW,CAAC6B,KAAZ,IAAqB,EAArC;AACD,KAFD,MAEO;AACLC,MAAAA,YAAY,GAAI9B,WAAW,IAAI,EAA/B;AACD;;AAED,UAAM+B,YAAY,GAAG7B,QAAQ,IAAI,EAAjC;AACA,QAAI8B,SAAS,GAAGtB,QAAQ,IAAI,EAA5B;;AACA,QAAI,OAAOsB,SAAP,KAAqB,UAAzB,EAAqC;AACnCA,MAAAA,SAAS,GAAGA,SAAS,CAACd,MAAM,EAAP,CAArB;AACD;;AAED,UAAMe,SAAS,GAAG,CAACpB,SAAD,IAAcQ,YAAhC;AAEA,QAAIa,YAAqB,GAAG,EAA5B;;AACA,QAAI3B,aAAa,KAAK,OAAtB,EAA+B;AAC7B2B,MAAAA,YAAY,GAAGZ,MAAM,CAACa,MAAP,CAAc,EAAd,EAAkBL,YAAlB,EAAgCH,YAAhC,CAAf;AACD,KAFD,MAEO;AACLO,MAAAA,YAAY,GAAGZ,MAAM,CAACa,MAAP,CAAc,EAAd,EAAkBR,YAAlB,EAAgCG,YAAhC,CAAf;AACD;;AAED,QACE,CAAClB,SAAS,CAACiB,KAAX,IACA,CAACb,uBADD,IAEAM,MAAM,CAAC9E,IAAP,CAAYuF,YAAZ,EAA0BR,MAH5B,EAIE;AACAW,MAAAA,YAAY,GAAGH,YAAf;AACD,KAND,MAMO;AACLG,MAAAA,YAAY,GAAGZ,MAAM,CAACa,MAAP,CAAc,EAAd,EAAkBJ,YAAlB,EAAgCG,YAAhC,CAAf;AACD;;AAED,QAAID,SAAS,IAAID,SAAjB,EAA4B;AAC1BE,MAAAA,YAAY,GAAGZ,MAAM,CAACa,MAAP,CAAc,EAAd,EAAkBH,SAAlB,CAAf;AACD;;AAED,UAAMI,iBAA0C,GAAG,EAAnD;;AACA,SAAK,MAAM9D,GAAX,IAAkB0D,SAAS,IAAI,EAA/B,EAAmC;AACjCI,MAAAA,iBAAiB,CAAC9D,GAAD,CAAjB,GAAyB,IAAzB;AACD,KA/CkC,CAiDnC;;;AACA,QAAIF,UAAJ;;AACA,QAAI+B,cAAc,IAAI,WAAWA,cAAjC,EAAiD;AAC/C/B,MAAAA,UAAU,GAAG+B,cAAc,CAAC0B,KAA5B;AACD,KAFD,MAEO;AACLzD,MAAAA,UAAU,GAAG+B,cAAb;AACD;;AACD,QAAI8B,SAAS,IAAI5B,kBAAjB,EAAqC;AACnC,UAAID,cAAJ;;AACA,UAAIC,kBAAkB,IAAI,WAAWA,kBAArC,EAAyD;AACvDD,QAAAA,cAAc,GAAGC,kBAAkB,CAACwB,KAApC;AACD,OAFD,MAEO;AACLzB,QAAAA,cAAc,GAAGC,kBAAjB;AACD;;AAEDjC,MAAAA,UAAU,GAAGkD,MAAM,CAACa,MAAP,CAAc,EAAd,EAAkB/D,UAAlB,EAA8BgC,cAA9B,CAAb;AACD;;AAED,SAAK,MAAMjC,IAAX,IAAmB+D,YAAnB,EAAiC;AAC/B,YAAM5D,GAAG,GAAGH,IAAZ;AACA,YAAM0D,KAAK,GAAGK,YAAY,CAAC5D,GAAD,CAA1B;AAEA,YAAM;AACJa,QAAAA,SADI;AAEJD,QAAAA,MAFI;AAGJW,QAAAA,YAHI;AAIJlB,QAAAA,WAJI;AAKJC,QAAAA;AALI,UAMFH,eAAe,CAACH,GAAD,EAAMF,UAAN,CANnB;;AAQA,YAAMiE,QAAmD,GAAG,CAC1DC,SAD0D,EAE1DC,WAF0D,KAGvD;AACH,YAAI/B,YAAJ,EAAkB;AAChBtE,UAAAA,OAAO,CAACkF,uBAAD,CAAP,CAAiC9C,GAAjC,EAA6CgE,SAA7C,EAAwDC,WAAxD,EAAqE;AACnEC,YAAAA,cAAc,EAAEX;AADmD,WAArE;AAGD;;AACD,YAAII,SAAJ,EAAe;AACbG,UAAAA,iBAAiB,CAAC9D,GAAD,CAAjB,GAAyB,KAAzB;AACA,gBAAMmE,gBAAgB,GAAGnB,MAAM,CAACoB,MAAP,CAAcN,iBAAd,EAAiCO,IAAjC,CACvBxF,OADuB,CAAzB,CAFa,CAKb;;AACA,cAAI,CAACsF,gBAAL,EAAuB;AACrBvG,YAAAA,OAAO,CAACiF,uBAAD,CAAP;AACD;AACF;AACF,OAnBD;;AAqBA,UAAI;AAAE5C,QAAAA;AAAF,UAAcL,cAAc,CAACI,GAAD,EAAMF,UAAN,EAAkBC,YAAlB,CAAhC;;AAEA,UAAIwD,KAAK,IAAI,IAAT,IAAiBA,KAAK,KAAK,KAA/B,EAAsC;AACpC;AACA;AACA;AACA;AACD;;AAED,YAAMe,gBAAgB,GAAG,CACvBC,WADuB,EAEvBC,aAFuB,KAGpB;AACH,cAAMC,QAAe,GAAG,EAAxB;;AAEA,aAAK,MAAMC,IAAX,IAAmBF,aAAnB,EAAkC;AAChC,gBAAMG,UAAU,GACd,OAAOD,IAAP,KAAgB,QAAhB,GACIA,IAAI,IAAI,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEnB,KAAN,KAAe,IAAvB,IAA+B,CAAAmB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEnB,KAAN,MAAgB,KADnD,GAEImB,IAAI,IAAI,IAAR,IAAgBA,IAAI,KAAK,KAH/B;;AAIA,cAAIC,UAAJ,EAAgB;AACd,gBAAIC,SAAS,GAAG3E,OAAhB;AACA,gBAAI4E,SAAS,GAAGH,IAAhB;AACA,gBAAII,UAAU,GAAG9B,MAAM,CAACa,MAAP,CAAc,EAAd,EAAkBjD,MAAlB,CAAjB;AACA,gBAAImE,aAAa,GAAGlE,SAApB;;AACA,gBAAI,OAAO6D,IAAP,KAAgB,QAApB,EAA8B;AAC5B;AACA,oBAAMM,cAAc,GAAGhC,MAAM,CAACa,MAAP,CAAc,EAAd,EAAkBa,IAAlB,CAAvB;AAEA,qBAAOM,cAAc,CAAC9E,KAAtB;AACA,qBAAO8E,cAAc,CAACzB,KAAtB;AAEA,oBAAM;AAAE3C,gBAAAA,MAAM,EAAEqE,gBAAV;AAA4BpE,gBAAAA;AAA5B,kBAA0CV,eAAe,CAC7DoE,WAD6D,EAE7DS,cAF6D,CAA/D;AAKAF,cAAAA,UAAU,GAAG9B,MAAM,CAACa,MAAP,CAAc,EAAd,EAAkBiB,UAAlB,EAA8BG,gBAA9B,CAAb;AACAF,cAAAA,aAAa,GAAGlE,SAAhB;;AAEA,kBAAI6D,IAAI,CAACxE,KAAL,IAAc,IAAlB,EAAwB;AACtB0E,gBAAAA,SAAS,GAAGF,IAAI,CAACxE,KAAjB;AACD;;AACD2E,cAAAA,SAAS,GAAGH,IAAI,CAACnB,KAAjB;AACD;;AAED,kBAAM2B,aAAa,GAAGH,aAAa,CAACF,SAAD,EAAYC,UAAZ,EAAwBf,QAAxB,CAAnC;;AACA,gBAAIa,SAAS,IAAI,IAAjB,EAAuB;AACrBH,cAAAA,QAAQ,CAACU,IAAT,CAAc1H,SAAS,CAACmH,SAAD,EAAYM,aAAZ,CAAvB;AACD,aAFD,MAEO;AACLT,cAAAA,QAAQ,CAACU,IAAT,CAAcD,aAAd;AACD;AACF;AACF;;AAED,eAAOT,QAAP;AACD,OA/CD;;AAiDA,UAAIzE,GAAG,KAAK,WAAZ,EAAyB;AACvB,YAAI,CAACoF,KAAK,CAACC,OAAN,CAAc9B,KAAd,CAAL,EAA2B;AACzB+B,UAAAA,OAAO,CAACC,KAAR,YACM1H,WADN;AAGD,SAJD,MAIO;AACL,eAAK,MAAM2H,eAAX,IAA8BjC,KAA9B,EAAqC;AACnCJ,YAAAA,KAAK,CAAC,WAAD,CAAL,GAAqBA,KAAK,CAAC,WAAD,CAAL,IAAsB,EAA3C;AACA,kBAAMsC,YAAY,GAAGzC,MAAM,CAAC9E,IAAP,CAAYsH,eAAZ,EAA6B,CAA7B,CAArB;AACA,kBAAME,cAAc,GAAGF,eAAe,CAACC,YAAD,CAAtC;AACA,kBAAMrC,SAAS,GAAG,EAAlB;;AAEA,gBAAIgC,KAAK,CAACC,OAAN,CAAcK,cAAd,CAAJ,EAAmC;AACjC;AACA,oBAAMjB,QAAQ,GAAGH,gBAAgB,CAACmB,YAAD,EAAeC,cAAf,CAAjC;;AAEA,kBAAIjB,QAAQ,CAACxB,MAAb,EAAqB;AACnB,oBAAI0C,UAAU,GAAGhI,YAAY,CAAC8G,QAAQ,CAAC,CAAD,CAAT,EAAc,GAAGA,QAAQ,CAACmB,KAAT,CAAe,CAAf,CAAjB,CAA7B;;AACA,oBAAIrE,YAAJ,EAAkB;AAChBoE,kBAAAA,UAAU,GAAGjI,UAAU,CACrBiI,UADqB,EAErBtF,WAFqB,EAGrBC,aAHqB,CAAvB;AAKD;;AACD8C,gBAAAA,SAAS,CAACqC,YAAD,CAAT,GAA0BE,UAA1B;AACD;AACF,aAfD,MAeO;AAAA;;AACL,kBAAI,gBAAA7F,UAAU,UAAV,2EAAa2F,YAAb,iFAA4BvF,KAA5B,KAAqC,IAAzC,EAA+C;AAAA;;AAC7CD,gBAAAA,OAAO,mBAAGH,UAAH,0EAAG,aAAa2F,YAAb,CAAH,0DAAG,sBAA4BvF,KAAtC;AACD;;AAED,kBAAIyF,UAAU,GAAG9E,SAAS,CAAC6E,cAAD,EAAiB9E,MAAjB,EAAyBmD,QAAzB,CAA1B;;AACA,kBAAIxC,YAAJ,EAAkB;AAChBoE,gBAAAA,UAAU,GAAGjI,UAAU,CAACiI,UAAD,EAAatF,WAAb,EAA0BC,aAA1B,CAAvB;AACD;;AACD,kBAAIL,OAAO,IAAI,IAAf,EAAqB;AACnBmD,gBAAAA,SAAS,CAACqC,YAAD,CAAT,GAA0BhI,SAAS,CAACwC,OAAD,EAAU0F,UAAV,CAAnC;AACD,eAFD,MAEO;AACLvC,gBAAAA,SAAS,CAACqC,YAAD,CAAT,GAA0BE,UAA1B;AACD;AACF;;AAED,gBAAI3C,MAAM,CAAC9E,IAAP,CAAYkF,SAAZ,EAAuBH,MAA3B,EAAmC;AACjCE,cAAAA,KAAK,CAAC,WAAD,CAAL,CAAmBgC,IAAnB,CAAwB/B,SAAxB;AACD;AACF;AACF;AACF,OAhDD,MAgDO,IAAIgC,KAAK,CAACC,OAAN,CAAc9B,KAAd,CAAJ,EAA0B;AAC/B;AAEA,cAAMkB,QAAQ,GAAGH,gBAAgB,CAACtE,GAAD,EAAMuD,KAAN,CAAjC;AACA,YAAIoC,UAAU,GAAGhI,YAAY,CAAC8G,QAAQ,CAAC,CAAD,CAAT,EAAc,GAAGA,QAAQ,CAACmB,KAAT,CAAe,CAAf,CAAjB,CAA7B;;AACA,YAAIrE,YAAJ,EAAkB;AAChBoE,UAAAA,UAAU,GAAGjI,UAAU,CAACiI,UAAD,EAAatF,WAAb,EAA0BC,aAA1B,CAAvB;AACD;;AAED,YAAIxB,WAAW,CAACkB,GAAD,CAAf,EAAsB;AACpB;AACAmD,UAAAA,KAAK,CAAC,WAAD,CAAL,GAAqBA,KAAK,CAAC,WAAD,CAAL,IAAsB,EAA3C;;AAEA,cAAIsB,QAAQ,CAACxB,MAAb,EAAqB;AACnB,kBAAMG,SAAS,GAAG,EAAlB;AAEAA,YAAAA,SAAS,CAACpD,GAAD,CAAT,GAAiB2F,UAAjB,CAHmB,CAKnB;;AACAxC,YAAAA,KAAK,CAAC,WAAD,CAAL,CAAmBgC,IAAnB,CAAwB/B,SAAxB;AACD;AACF,SAZD,MAYO;AACL;AACA;AACA,cAAIqB,QAAQ,CAACxB,MAAb,EAAqB;AACnBE,YAAAA,KAAK,CAACnD,GAAD,CAAL,GAAa2F,UAAb;AACD;AACF;AACF,OA5BM,MA4BA,IAAI7G,WAAW,CAACkB,GAAD,CAAf,EAAsB;AAAA;;AAC3BmD,QAAAA,KAAK,CAAC,WAAD,CAAL,GAAqBA,KAAK,CAAC,WAAD,CAAL,IAAsB,EAA3C,CAD2B,CAE3B;AACA;;AAEA,YAAI,iBAAArD,UAAU,UAAV,wEAAaE,GAAb,uEAAmBE,KAAnB,KAA4B,IAAhC,EAAsC;AAAA;;AACpCD,UAAAA,OAAO,mBAAGH,UAAH,qEAAG,aAAaE,GAAb,CAAH,qDAAG,iBAAmBE,KAA7B;AACD;;AAED,cAAMkD,SAAS,GAAG,EAAlB;AACA,YAAIuC,UAAU,GAAG9E,SAAS,CAAC0C,KAAD,EAAQ3C,MAAR,EAAgBmD,QAAhB,CAA1B;;AACA,YAAIxC,YAAJ,EAAkB;AAChBoE,UAAAA,UAAU,GAAGjI,UAAU,CAACiI,UAAD,EAAatF,WAAb,EAA0BC,aAA1B,CAAvB;AACD;;AACD,YAAIL,OAAO,IAAI,IAAf,EAAqB;AACnBmD,UAAAA,SAAS,CAACpD,GAAD,CAAT,GAAiBvC,SAAS,CAACwC,OAAD,EAAU0F,UAAV,CAA1B;AACD,SAFD,MAEO;AACLvC,UAAAA,SAAS,CAACpD,GAAD,CAAT,GAAiB2F,UAAjB;AACD,SAlB0B,CAoB3B;;;AACAxC,QAAAA,KAAK,CAAC,WAAD,CAAL,CAAmBgC,IAAnB,CAAwB/B,SAAxB;AACD,OAtBM,MAsBA,IAAI,OAAOG,KAAP,KAAiB,QAArB,EAA+B;AACpC;AACAJ,QAAAA,KAAK,CAACnD,GAAD,CAAL,GAAa,EAAb;;AACA,aAAK,MAAM6F,aAAX,IAA4BtC,KAAK,IAAI,EAArC,EAAyC;AACvC,cAAIoC,UAAU,GAAG9E,SAAS,CAAC0C,KAAD,EAAQ3C,MAAR,EAAgBmD,QAAhB,CAA1B;;AAEA,cAAIxC,YAAJ,EAAkB;AAChBoE,YAAAA,UAAU,GAAGjI,UAAU,CAACiI,UAAD,EAAatF,WAAb,EAA0BC,aAA1B,CAAvB;AACD;;AAED,cAAIL,OAAO,IAAI,IAAf,EAAqB;AACnBkD,YAAAA,KAAK,CAACnD,GAAD,CAAL,CAAW6F,aAAX,IAA4BpI,SAAS,CAACwC,OAAD,EAAU0F,UAAV,CAArC;AACD,WAFD,MAEO;AACLxC,YAAAA,KAAK,CAACnD,GAAD,CAAL,CAAW6F,aAAX,IAA4BF,UAA5B;AACD;AACF;AACF,OAhBM,MAgBA;AACL,YAAIA,UAAU,GAAG9E,SAAS,CAAC0C,KAAD,EAAQ3C,MAAR,EAAgBmD,QAAhB,CAA1B;;AACA,YAAIxC,YAAJ,EAAkB;AAChBoE,UAAAA,UAAU,GAAGjI,UAAU,CAACiI,UAAD,EAAatF,WAAb,EAA0BC,aAA1B,CAAvB;AACD;;AAED,YAAIL,OAAO,IAAI,IAAX,IAAmB,OAAOA,OAAP,KAAmB,QAA1C,EAAoD;AAClDkD,UAAAA,KAAK,CAACnD,GAAD,CAAL,GAAavC,SAAS,CAACwC,OAAD,EAAU0F,UAAV,CAAtB;AACD,SAFD,MAEO;AACLxC,UAAAA,KAAK,CAACnD,GAAD,CAAL,GAAa2F,UAAb;AACD;AACF;AACF;;AAED,QAAI,sBAACxC,KAAK,CAACC,SAAP,6CAAC,iBAAiBH,MAAlB,CAAJ,EAA8B;AAC5B,aAAOE,KAAK,CAACC,SAAb;AACD;;AAED,WAAOD,KAAP;AACD,GAnS6B,EAmS3B,CACDzB,WADC,EAEDkB,MAFC,EAGD7C,YAHC,EAID2C,uBAJC,EAKDN,QALC,EAMDL,kBANC,EAODH,QAPC,EAQDmB,YARC,EASDT,SATC,EAUDC,SAVC,EAWDL,YAXC,EAYDY,uBAZC,EAaDD,uBAbC,EAcDb,KAdC,EAeDC,aAfC,EAgBDJ,cAhBC,CAnS2B,CAA9B;AAsTA1E,EAAAA,SAAS,CAAC,MAAM;AACdmF,IAAAA,SAAS,CAACiB,KAAV,GAAkB,IAAlB;AACD,GAFQ,EAEN,CAACjB,SAAD,CAFM,CAAT;AAIAnF,EAAAA,SAAS,CACP,SAAS2I,yBAAT,GAAqC;AACnC,QAAI,CAACvD,SAAD,IAAc,CAACQ,YAAnB,EAAiC;AAC/BF,MAAAA,uBAAuB;AACxB;AACF,GALM,EAMP,CAACE,YAAD,EAAeR,SAAf,EAA0BM,uBAA1B,CANO,CAAT;AASA,SAAO;AACLK,IAAAA;AADK,GAAP;AAGD","sourcesContent":["import { PresenceContext, usePresence } from 'framer-motion'\nimport { useCallback, useContext, useEffect } from 'react'\nimport type { TransformsStyle } from 'react-native'\nimport {\n  useAnimatedStyle,\n  useSharedValue,\n  withDecay,\n  withSpring,\n  withTiming,\n  withDelay,\n  withRepeat,\n  withSequence,\n  runOnJS,\n} from 'react-native-reanimated'\nimport type {\n  WithDecayConfig,\n  WithSpringConfig,\n  WithTimingConfig,\n} from 'react-native-reanimated'\nimport { PackageName } from './constants/package-name'\nimport type {\n  MotiProps,\n  MotiTransition,\n  SequenceItem,\n  Transforms,\n  TransitionConfig,\n} from './types'\n\nconst debug = (...args: any[]) => {\n  'worklet'\n  if (args) {\n    // hi\n  }\n  // console.log('[moti]', ...args)\n}\n\nconst isColor = (styleKey: string) => {\n  'worklet'\n  const keys = {\n    backgroundColor: true,\n    borderBottomColor: true,\n    borderLeftColor: true,\n    borderRightColor: true,\n    borderTopColor: true,\n    color: true,\n    shadowColor: true,\n    borderColor: true,\n    borderEndColor: true,\n    borderStartColor: true,\n  }\n\n  return Boolean(keys[styleKey])\n}\n\nconst isTransform = (styleKey: string) => {\n  'worklet'\n\n  const transforms: Record<keyof Transforms, true> = {\n    perspective: true,\n    rotate: true,\n    rotateX: true,\n    rotateY: true,\n    rotateZ: true,\n    scale: true,\n    scaleX: true,\n    scaleY: true,\n    translateX: true,\n    translateY: true,\n    skewX: true,\n    skewY: true,\n  }\n\n  return Boolean(transforms[styleKey])\n}\n\nfunction animationDelay<Animate>(\n  _key: string,\n  transition: MotiTransition<Animate> | undefined,\n  defaultDelay?: number\n) {\n  'worklet'\n  const key = _key as keyof Animate\n  let delayMs: TransitionConfig['delay'] = defaultDelay\n\n  if (transition?.[key]?.delay != null) {\n    delayMs = transition?.[key]?.delay\n  } else if (transition?.delay != null) {\n    delayMs = transition.delay\n  }\n\n  return {\n    delayMs,\n  }\n}\n\nfunction animationConfig<Animate>(\n  styleProp: string,\n  transition: MotiTransition<Animate> | undefined\n) {\n  'worklet'\n\n  const key = styleProp as Extract<keyof Animate, string>\n  let repeatCount = 0\n  let repeatReverse = true\n\n  let animationType: Required<TransitionConfig>['type'] = 'spring'\n  if (isColor(key) || key === 'opacity') animationType = 'timing'\n\n  const styleSpecificTransition = transition?.[key]\n\n  // say that we're looking at `width`\n  // first, check if we have transition.width.type\n\n  if (styleSpecificTransition?.type) {\n    animationType = styleSpecificTransition.type\n  } else if (transition?.type) {\n    // otherwise, fallback to transition.type\n    animationType = transition.type\n  }\n\n  const loop = styleSpecificTransition?.loop ?? transition?.loop\n\n  if (loop != null) {\n    repeatCount = loop ? -1 : 0\n  }\n\n  if (styleSpecificTransition?.repeat != null) {\n    repeatCount = styleSpecificTransition?.repeat\n  } else if (transition?.repeat != null) {\n    repeatCount = transition.repeat\n  }\n\n  if (styleSpecificTransition?.repeatReverse != null) {\n    repeatReverse = styleSpecificTransition.repeatReverse\n  } else if (transition?.repeatReverse != null) {\n    repeatReverse = transition.repeatReverse\n  }\n\n  debug({ loop, key, repeatCount, animationType })\n\n  let config = {}\n  // so sad, but fix it later :(\n  let animation = (...props: any): any => props\n\n  if (animationType === 'timing') {\n    const duration =\n      (transition?.[key] as WithTimingConfig | undefined)?.duration ??\n      (transition as WithTimingConfig | undefined)?.duration\n\n    const easing =\n      (transition?.[key] as WithTimingConfig | undefined)?.easing ??\n      (transition as WithTimingConfig | undefined)?.easing\n\n    if (easing) {\n      config['easing'] = easing\n    }\n    if (duration != null) {\n      config['duration'] = duration\n    }\n    animation = withTiming\n  } else if (animationType === 'spring') {\n    animation = withSpring\n    config = {} as WithSpringConfig\n    const configKeys: (keyof WithSpringConfig)[] = [\n      'damping',\n      'mass',\n      'overshootClamping',\n      'restDisplacementThreshold',\n      'restSpeedThreshold',\n      'stiffness',\n      'velocity',\n    ]\n    for (const configKey of configKeys) {\n      const styleSpecificConfig = transition?.[key]?.[configKey]\n      const transitionConfigForKey = transition?.[configKey]\n\n      if (styleSpecificConfig != null) {\n        config[configKey] = styleSpecificConfig\n      } else if (transitionConfigForKey != null) {\n        config[configKey] = transitionConfigForKey\n      }\n    }\n  } else if (animationType === 'decay') {\n    animation = withDecay\n    config = {\n      velocity: 2,\n      deceleration: 2,\n    }\n    const configKeys: (keyof WithDecayConfig)[] = [\n      'clamp',\n      'velocity',\n      'deceleration',\n      'velocityFactor',\n    ]\n    for (const configKey of configKeys) {\n      // is this necessary ^ don't think so...?\n      const styleSpecificConfig = transition?.[key]?.[configKey]\n      const transitionConfigForKey = transition?.[configKey]\n\n      if (styleSpecificConfig != null) {\n        config[configKey] = styleSpecificConfig\n      } else if (transitionConfigForKey != null) {\n        config[configKey] = transitionConfigForKey\n      }\n    }\n  }\n\n  return {\n    animation,\n    config,\n    repeatReverse,\n    repeatCount,\n    shouldRepeat: !!repeatCount,\n  }\n}\n\nexport function useMotify<Animate>({\n  animate: animateProp,\n  from: fromProp = false,\n  transition: transitionProp,\n  exitTransition: exitTransitionProp,\n  delay: defaultDelay,\n  state,\n  stylePriority = 'animate',\n  onDidAnimate,\n  exit: exitProp,\n  animateInitialState = false,\n}: MotiProps<Animate>) {\n  const isMounted = useSharedValue(false)\n  const [isPresent, safeToUnmount] = usePresence()\n  const presence = useContext(PresenceContext)\n\n  const disableInitialAnimation =\n    presence?.initial === false && !animateInitialState\n  const custom = useCallback(() => {\n    'worklet'\n    return presence?.custom\n  }, [presence])\n\n  const reanimatedSafeToUnmount = useCallback(() => {\n    safeToUnmount?.()\n  }, [safeToUnmount])\n\n  const reanimatedOnDidAnimated = useCallback<NonNullable<typeof onDidAnimate>>(\n    (...args) => {\n      onDidAnimate?.(...args)\n    },\n    [onDidAnimate]\n  )\n\n  const hasExitStyle = Boolean(\n    typeof exitProp === 'function' ||\n      (typeof exitProp === 'object' &&\n        exitProp &&\n        Object.keys(exitProp).length > 0)\n  )\n\n  const style = useAnimatedStyle(() => {\n    const final = {\n      // initializing here fixes reanimated object.__defineProperty bug(?)\n      transform: [] as TransformsStyle['transform'],\n    }\n    const variantStyle: Animate = state?.__state?.value || {}\n\n    let animateStyle: Animate\n\n    if (animateProp && 'value' in animateProp) {\n      animateStyle = (animateProp.value || {}) as Animate\n    } else {\n      animateStyle = (animateProp || {}) as Animate\n    }\n\n    const initialStyle = fromProp || {}\n    let exitStyle = exitProp || {}\n    if (typeof exitStyle === 'function') {\n      exitStyle = exitStyle(custom())\n    }\n\n    const isExiting = !isPresent && hasExitStyle\n\n    let mergedStyles: Animate = {} as Animate\n    if (stylePriority === 'state') {\n      mergedStyles = Object.assign({}, animateStyle, variantStyle)\n    } else {\n      mergedStyles = Object.assign({}, variantStyle, animateStyle)\n    }\n\n    if (\n      !isMounted.value &&\n      !disableInitialAnimation &&\n      Object.keys(initialStyle).length\n    ) {\n      mergedStyles = initialStyle as Animate\n    } else {\n      mergedStyles = Object.assign({}, initialStyle, mergedStyles)\n    }\n\n    if (isExiting && exitStyle) {\n      mergedStyles = Object.assign({}, exitStyle) as any\n    }\n\n    const exitingStyleProps: Record<string, boolean> = {}\n    for (const key in exitStyle || {}) {\n      exitingStyleProps[key] = true\n    }\n\n    // allow shared values as transitions\n    let transition: MotiTransition<Animate> | undefined\n    if (transitionProp && 'value' in transitionProp) {\n      transition = transitionProp.value\n    } else {\n      transition = transitionProp\n    }\n    if (isExiting && exitTransitionProp) {\n      let exitTransition: MotiTransition<Animate> | undefined\n      if (exitTransitionProp && 'value' in exitTransitionProp) {\n        exitTransition = exitTransitionProp.value\n      } else {\n        exitTransition = exitTransitionProp\n      }\n\n      transition = Object.assign({}, transition, exitTransition)\n    }\n\n    for (const _key in mergedStyles) {\n      const key = _key as string\n      const value = mergedStyles[key]\n\n      const {\n        animation,\n        config,\n        shouldRepeat,\n        repeatCount,\n        repeatReverse,\n      } = animationConfig(key, transition)\n\n      const callback: (completed: boolean, value?: any) => void = (\n        completed,\n        recentValue\n      ) => {\n        if (onDidAnimate) {\n          runOnJS(reanimatedOnDidAnimated)(key as any, completed, recentValue, {\n            attemptedValue: value,\n          })\n        }\n        if (isExiting) {\n          exitingStyleProps[key] = false\n          const areStylesExiting = Object.values(exitingStyleProps).some(\n            Boolean\n          )\n          // if this is true, then we've finished our exit animations\n          if (!areStylesExiting) {\n            runOnJS(reanimatedSafeToUnmount)()\n          }\n        }\n      }\n\n      let { delayMs } = animationDelay(key, transition, defaultDelay)\n\n      if (value == null || value === false) {\n        // skip missing values\n        // this is useful if you want to do {opacity: loading && 1}\n        // without this, those values will break I think\n        continue\n      }\n\n      const getSequenceArray = (\n        sequenceKey: string,\n        sequenceArray: SequenceItem<any>[]\n      ) => {\n        const sequence: any[] = []\n\n        for (const step of sequenceArray) {\n          const shouldPush =\n            typeof step === 'object'\n              ? step && step?.value != null && step?.value !== false\n              : step != null && step !== false\n          if (shouldPush) {\n            let stepDelay = delayMs\n            let stepValue = step\n            let stepConfig = Object.assign({}, config)\n            let stepAnimation = animation\n            if (typeof step === 'object') {\n              // not allowed in Reanimated: { delay, value, ...transition } = step\n              const stepTransition = Object.assign({}, step)\n\n              delete stepTransition.delay\n              delete stepTransition.value\n\n              const { config: inlineStepConfig, animation } = animationConfig(\n                sequenceKey,\n                stepTransition\n              )\n\n              stepConfig = Object.assign({}, stepConfig, inlineStepConfig)\n              stepAnimation = animation\n\n              if (step.delay != null) {\n                stepDelay = step.delay\n              }\n              stepValue = step.value\n            }\n\n            const sequenceValue = stepAnimation(stepValue, stepConfig, callback)\n            if (stepDelay != null) {\n              sequence.push(withDelay(stepDelay, sequenceValue))\n            } else {\n              sequence.push(sequenceValue)\n            }\n          }\n        }\n\n        return sequence\n      }\n\n      if (key === 'transform') {\n        if (!Array.isArray(value)) {\n          console.error(\n            `[${PackageName}]: Invalid transform value. Needs to be an array.`\n          )\n        } else {\n          for (const transformObject of value) {\n            final['transform'] = final['transform'] || []\n            const transformKey = Object.keys(transformObject)[0]\n            const transformValue = transformObject[transformKey]\n            const transform = {} as any\n\n            if (Array.isArray(transformValue)) {\n              // we have a sequence in this transform...\n              const sequence = getSequenceArray(transformKey, transformValue)\n\n              if (sequence.length) {\n                let finalValue = withSequence(sequence[0], ...sequence.slice(1))\n                if (shouldRepeat) {\n                  finalValue = withRepeat(\n                    finalValue,\n                    repeatCount,\n                    repeatReverse\n                  )\n                }\n                transform[transformKey] = finalValue\n              }\n            } else {\n              if (transition?.[transformKey]?.delay != null) {\n                delayMs = transition?.[transformKey]?.delay\n              }\n\n              let finalValue = animation(transformValue, config, callback)\n              if (shouldRepeat) {\n                finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n              }\n              if (delayMs != null) {\n                transform[transformKey] = withDelay(delayMs, finalValue)\n              } else {\n                transform[transformKey] = finalValue\n              }\n            }\n\n            if (Object.keys(transform).length) {\n              final['transform'].push(transform)\n            }\n          }\n        }\n      } else if (Array.isArray(value)) {\n        // we have a sequence\n\n        const sequence = getSequenceArray(key, value)\n        let finalValue = withSequence(sequence[0], ...sequence.slice(1))\n        if (shouldRepeat) {\n          finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n        }\n\n        if (isTransform(key)) {\n          // we have a sequence of transforms\n          final['transform'] = final['transform'] || []\n\n          if (sequence.length) {\n            const transform = {}\n\n            transform[key] = finalValue\n\n            // @ts-expect-error transform had the wrong type\n            final['transform'].push(transform)\n          }\n        } else {\n          // we have a normal sequence of items\n          // shadows not supported\n          if (sequence.length) {\n            final[key] = finalValue\n          }\n        }\n      } else if (isTransform(key)) {\n        final['transform'] = final['transform'] || []\n        // const transformKey = Object.keys(transformProp)[0]\n        // const transformValue = transformProp[transformKey]\n\n        if (transition?.[key]?.delay != null) {\n          delayMs = transition?.[key]?.delay\n        }\n\n        const transform = {}\n        let finalValue = animation(value, config, callback)\n        if (shouldRepeat) {\n          finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n        }\n        if (delayMs != null) {\n          transform[key] = withDelay(delayMs, finalValue)\n        } else {\n          transform[key] = finalValue\n        }\n\n        // @ts-expect-error transform had the wrong type\n        final['transform'].push(transform)\n      } else if (typeof value === 'object') {\n        // shadows\n        final[key] = {}\n        for (const innerStyleKey in value || {}) {\n          let finalValue = animation(value, config, callback)\n\n          if (shouldRepeat) {\n            finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n          }\n\n          if (delayMs != null) {\n            final[key][innerStyleKey] = withDelay(delayMs, finalValue)\n          } else {\n            final[key][innerStyleKey] = finalValue\n          }\n        }\n      } else {\n        let finalValue = animation(value, config, callback)\n        if (shouldRepeat) {\n          finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n        }\n\n        if (delayMs != null && typeof delayMs === 'number') {\n          final[key] = withDelay(delayMs, finalValue)\n        } else {\n          final[key] = finalValue\n        }\n      }\n    }\n\n    if (!final.transform?.length) {\n      delete final.transform\n    }\n\n    return final\n  }, [\n    animateProp,\n    custom,\n    defaultDelay,\n    disableInitialAnimation,\n    exitProp,\n    exitTransitionProp,\n    fromProp,\n    hasExitStyle,\n    isMounted,\n    isPresent,\n    onDidAnimate,\n    reanimatedOnDidAnimated,\n    reanimatedSafeToUnmount,\n    state,\n    stylePriority,\n    transitionProp,\n  ])\n\n  useEffect(() => {\n    isMounted.value = true\n  }, [isMounted])\n\n  useEffect(\n    function allowUnMountIfMissingExit() {\n      if (!isPresent && !hasExitStyle) {\n        reanimatedSafeToUnmount()\n      }\n    },\n    [hasExitStyle, isPresent, reanimatedSafeToUnmount]\n  )\n\n  return {\n    style,\n  }\n}\n"]}