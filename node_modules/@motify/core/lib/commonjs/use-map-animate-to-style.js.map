{"version":3,"sources":["use-map-animate-to-style.ts"],"names":["debug","args","isColor","styleKey","keys","backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","shadowColor","borderColor","borderEndColor","borderStartColor","Boolean","isTransform","transforms","perspective","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","translateX","translateY","skewX","skewY","animationDelay","_key","transition","defaultDelay","key","delayMs","delay","animationConfig","styleProp","repeatCount","repeatReverse","animationType","styleSpecificTransition","type","loop","repeat","config","animation","props","duration","easing","withTiming","withSpring","configKeys","configKey","styleSpecificConfig","transitionConfigForKey","withDecay","velocity","deceleration","shouldRepeat","useMotify","animate","animateProp","from","fromProp","transitionProp","exitTransition","exitTransitionProp","state","stylePriority","onDidAnimate","exit","exitProp","animateInitialState","isMounted","isPresent","safeToUnmount","presence","PresenceContext","disableInitialAnimation","initial","custom","reanimatedSafeToUnmount","reanimatedOnDidAnimated","hasExitStyle","Object","length","style","final","transform","variantStyle","__state","value","animateStyle","initialStyle","exitStyle","isExiting","mergedStyles","assign","exitingStyleProps","callback","completed","recentValue","attemptedValue","areStylesExiting","values","some","getSequenceArray","sequenceKey","sequenceArray","sequence","step","shouldPush","stepDelay","stepValue","stepConfig","stepAnimation","stepTransition","inlineStepConfig","sequenceValue","push","Array","isArray","console","error","PackageName","transformObject","transformKey","transformValue","finalValue","slice","innerStyleKey","allowUnMountIfMissingExit"],"mappings":"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","sourcesContent":["import { PresenceContext, usePresence } from 'framer-motion'\nimport { useCallback, useContext, useEffect } from 'react'\nimport type { TransformsStyle } from 'react-native'\nimport {\n  useAnimatedStyle,\n  useSharedValue,\n  withDecay,\n  withSpring,\n  withTiming,\n  withDelay,\n  withRepeat,\n  withSequence,\n  runOnJS,\n} from 'react-native-reanimated'\nimport type {\n  WithDecayConfig,\n  WithSpringConfig,\n  WithTimingConfig,\n} from 'react-native-reanimated'\nimport { PackageName } from './constants/package-name'\nimport type {\n  MotiProps,\n  MotiTransition,\n  SequenceItem,\n  Transforms,\n  TransitionConfig,\n} from './types'\n\nconst debug = (...args: any[]) => {\n  'worklet'\n  if (args) {\n    // hi\n  }\n  // console.log('[moti]', ...args)\n}\n\nconst isColor = (styleKey: string) => {\n  'worklet'\n  const keys = {\n    backgroundColor: true,\n    borderBottomColor: true,\n    borderLeftColor: true,\n    borderRightColor: true,\n    borderTopColor: true,\n    color: true,\n    shadowColor: true,\n    borderColor: true,\n    borderEndColor: true,\n    borderStartColor: true,\n  }\n\n  return Boolean(keys[styleKey])\n}\n\nconst isTransform = (styleKey: string) => {\n  'worklet'\n\n  const transforms: Record<keyof Transforms, true> = {\n    perspective: true,\n    rotate: true,\n    rotateX: true,\n    rotateY: true,\n    rotateZ: true,\n    scale: true,\n    scaleX: true,\n    scaleY: true,\n    translateX: true,\n    translateY: true,\n    skewX: true,\n    skewY: true,\n  }\n\n  return Boolean(transforms[styleKey])\n}\n\nfunction animationDelay<Animate>(\n  _key: string,\n  transition: MotiTransition<Animate> | undefined,\n  defaultDelay?: number\n) {\n  'worklet'\n  const key = _key as keyof Animate\n  let delayMs: TransitionConfig['delay'] = defaultDelay\n\n  if (transition?.[key]?.delay != null) {\n    delayMs = transition?.[key]?.delay\n  } else if (transition?.delay != null) {\n    delayMs = transition.delay\n  }\n\n  return {\n    delayMs,\n  }\n}\n\nfunction animationConfig<Animate>(\n  styleProp: string,\n  transition: MotiTransition<Animate> | undefined\n) {\n  'worklet'\n\n  const key = styleProp as Extract<keyof Animate, string>\n  let repeatCount = 0\n  let repeatReverse = true\n\n  let animationType: Required<TransitionConfig>['type'] = 'spring'\n  if (isColor(key) || key === 'opacity') animationType = 'timing'\n\n  const styleSpecificTransition = transition?.[key]\n\n  // say that we're looking at `width`\n  // first, check if we have transition.width.type\n\n  if (styleSpecificTransition?.type) {\n    animationType = styleSpecificTransition.type\n  } else if (transition?.type) {\n    // otherwise, fallback to transition.type\n    animationType = transition.type\n  }\n\n  const loop = styleSpecificTransition?.loop ?? transition?.loop\n\n  if (loop != null) {\n    repeatCount = loop ? -1 : 0\n  }\n\n  if (styleSpecificTransition?.repeat != null) {\n    repeatCount = styleSpecificTransition?.repeat\n  } else if (transition?.repeat != null) {\n    repeatCount = transition.repeat\n  }\n\n  if (styleSpecificTransition?.repeatReverse != null) {\n    repeatReverse = styleSpecificTransition.repeatReverse\n  } else if (transition?.repeatReverse != null) {\n    repeatReverse = transition.repeatReverse\n  }\n\n  debug({ loop, key, repeatCount, animationType })\n\n  let config = {}\n  // so sad, but fix it later :(\n  let animation = (...props: any): any => props\n\n  if (animationType === 'timing') {\n    const duration =\n      (transition?.[key] as WithTimingConfig | undefined)?.duration ??\n      (transition as WithTimingConfig | undefined)?.duration\n\n    const easing =\n      (transition?.[key] as WithTimingConfig | undefined)?.easing ??\n      (transition as WithTimingConfig | undefined)?.easing\n\n    if (easing) {\n      config['easing'] = easing\n    }\n    if (duration != null) {\n      config['duration'] = duration\n    }\n    animation = withTiming\n  } else if (animationType === 'spring') {\n    animation = withSpring\n    config = {} as WithSpringConfig\n    const configKeys: (keyof WithSpringConfig)[] = [\n      'damping',\n      'mass',\n      'overshootClamping',\n      'restDisplacementThreshold',\n      'restSpeedThreshold',\n      'stiffness',\n      'velocity',\n    ]\n    for (const configKey of configKeys) {\n      const styleSpecificConfig = transition?.[key]?.[configKey]\n      const transitionConfigForKey = transition?.[configKey]\n\n      if (styleSpecificConfig != null) {\n        config[configKey] = styleSpecificConfig\n      } else if (transitionConfigForKey != null) {\n        config[configKey] = transitionConfigForKey\n      }\n    }\n  } else if (animationType === 'decay') {\n    animation = withDecay\n    config = {\n      velocity: 2,\n      deceleration: 2,\n    }\n    const configKeys: (keyof WithDecayConfig)[] = [\n      'clamp',\n      'velocity',\n      'deceleration',\n      'velocityFactor',\n    ]\n    for (const configKey of configKeys) {\n      // is this necessary ^ don't think so...?\n      const styleSpecificConfig = transition?.[key]?.[configKey]\n      const transitionConfigForKey = transition?.[configKey]\n\n      if (styleSpecificConfig != null) {\n        config[configKey] = styleSpecificConfig\n      } else if (transitionConfigForKey != null) {\n        config[configKey] = transitionConfigForKey\n      }\n    }\n  }\n\n  return {\n    animation,\n    config,\n    repeatReverse,\n    repeatCount,\n    shouldRepeat: !!repeatCount,\n  }\n}\n\nexport function useMotify<Animate>({\n  animate: animateProp,\n  from: fromProp = false,\n  transition: transitionProp,\n  exitTransition: exitTransitionProp,\n  delay: defaultDelay,\n  state,\n  stylePriority = 'animate',\n  onDidAnimate,\n  exit: exitProp,\n  animateInitialState = false,\n}: MotiProps<Animate>) {\n  const isMounted = useSharedValue(false)\n  const [isPresent, safeToUnmount] = usePresence()\n  const presence = useContext(PresenceContext)\n\n  const disableInitialAnimation =\n    presence?.initial === false && !animateInitialState\n  const custom = useCallback(() => {\n    'worklet'\n    return presence?.custom\n  }, [presence])\n\n  const reanimatedSafeToUnmount = useCallback(() => {\n    safeToUnmount?.()\n  }, [safeToUnmount])\n\n  const reanimatedOnDidAnimated = useCallback<NonNullable<typeof onDidAnimate>>(\n    (...args) => {\n      onDidAnimate?.(...args)\n    },\n    [onDidAnimate]\n  )\n\n  const hasExitStyle = Boolean(\n    typeof exitProp === 'function' ||\n      (typeof exitProp === 'object' &&\n        exitProp &&\n        Object.keys(exitProp).length > 0)\n  )\n\n  const style = useAnimatedStyle(() => {\n    const final = {\n      // initializing here fixes reanimated object.__defineProperty bug(?)\n      transform: [] as TransformsStyle['transform'],\n    }\n    const variantStyle: Animate = state?.__state?.value || {}\n\n    let animateStyle: Animate\n\n    if (animateProp && 'value' in animateProp) {\n      animateStyle = (animateProp.value || {}) as Animate\n    } else {\n      animateStyle = (animateProp || {}) as Animate\n    }\n\n    const initialStyle = fromProp || {}\n    let exitStyle = exitProp || {}\n    if (typeof exitStyle === 'function') {\n      exitStyle = exitStyle(custom())\n    }\n\n    const isExiting = !isPresent && hasExitStyle\n\n    let mergedStyles: Animate = {} as Animate\n    if (stylePriority === 'state') {\n      mergedStyles = Object.assign({}, animateStyle, variantStyle)\n    } else {\n      mergedStyles = Object.assign({}, variantStyle, animateStyle)\n    }\n\n    if (\n      !isMounted.value &&\n      !disableInitialAnimation &&\n      Object.keys(initialStyle).length\n    ) {\n      mergedStyles = initialStyle as Animate\n    } else {\n      mergedStyles = Object.assign({}, initialStyle, mergedStyles)\n    }\n\n    if (isExiting && exitStyle) {\n      mergedStyles = Object.assign({}, exitStyle) as any\n    }\n\n    const exitingStyleProps: Record<string, boolean> = {}\n    for (const key in exitStyle || {}) {\n      exitingStyleProps[key] = true\n    }\n\n    // allow shared values as transitions\n    let transition: MotiTransition<Animate> | undefined\n    if (transitionProp && 'value' in transitionProp) {\n      transition = transitionProp.value\n    } else {\n      transition = transitionProp\n    }\n    if (isExiting && exitTransitionProp) {\n      let exitTransition: MotiTransition<Animate> | undefined\n      if (exitTransitionProp && 'value' in exitTransitionProp) {\n        exitTransition = exitTransitionProp.value\n      } else {\n        exitTransition = exitTransitionProp\n      }\n\n      transition = Object.assign({}, transition, exitTransition)\n    }\n\n    for (const _key in mergedStyles) {\n      const key = _key as string\n      const value = mergedStyles[key]\n\n      const {\n        animation,\n        config,\n        shouldRepeat,\n        repeatCount,\n        repeatReverse,\n      } = animationConfig(key, transition)\n\n      const callback: (completed: boolean, value?: any) => void = (\n        completed,\n        recentValue\n      ) => {\n        if (onDidAnimate) {\n          runOnJS(reanimatedOnDidAnimated)(key as any, completed, recentValue, {\n            attemptedValue: value,\n          })\n        }\n        if (isExiting) {\n          exitingStyleProps[key] = false\n          const areStylesExiting = Object.values(exitingStyleProps).some(\n            Boolean\n          )\n          // if this is true, then we've finished our exit animations\n          if (!areStylesExiting) {\n            runOnJS(reanimatedSafeToUnmount)()\n          }\n        }\n      }\n\n      let { delayMs } = animationDelay(key, transition, defaultDelay)\n\n      if (value == null || value === false) {\n        // skip missing values\n        // this is useful if you want to do {opacity: loading && 1}\n        // without this, those values will break I think\n        continue\n      }\n\n      const getSequenceArray = (\n        sequenceKey: string,\n        sequenceArray: SequenceItem<any>[]\n      ) => {\n        const sequence: any[] = []\n\n        for (const step of sequenceArray) {\n          const shouldPush =\n            typeof step === 'object'\n              ? step && step?.value != null && step?.value !== false\n              : step != null && step !== false\n          if (shouldPush) {\n            let stepDelay = delayMs\n            let stepValue = step\n            let stepConfig = Object.assign({}, config)\n            let stepAnimation = animation\n            if (typeof step === 'object') {\n              // not allowed in Reanimated: { delay, value, ...transition } = step\n              const stepTransition = Object.assign({}, step)\n\n              delete stepTransition.delay\n              delete stepTransition.value\n\n              const { config: inlineStepConfig, animation } = animationConfig(\n                sequenceKey,\n                stepTransition\n              )\n\n              stepConfig = Object.assign({}, stepConfig, inlineStepConfig)\n              stepAnimation = animation\n\n              if (step.delay != null) {\n                stepDelay = step.delay\n              }\n              stepValue = step.value\n            }\n\n            const sequenceValue = stepAnimation(stepValue, stepConfig, callback)\n            if (stepDelay != null) {\n              sequence.push(withDelay(stepDelay, sequenceValue))\n            } else {\n              sequence.push(sequenceValue)\n            }\n          }\n        }\n\n        return sequence\n      }\n\n      if (key === 'transform') {\n        if (!Array.isArray(value)) {\n          console.error(\n            `[${PackageName}]: Invalid transform value. Needs to be an array.`\n          )\n        } else {\n          for (const transformObject of value) {\n            final['transform'] = final['transform'] || []\n            const transformKey = Object.keys(transformObject)[0]\n            const transformValue = transformObject[transformKey]\n            const transform = {} as any\n\n            if (Array.isArray(transformValue)) {\n              // we have a sequence in this transform...\n              const sequence = getSequenceArray(transformKey, transformValue)\n\n              if (sequence.length) {\n                let finalValue = withSequence(sequence[0], ...sequence.slice(1))\n                if (shouldRepeat) {\n                  finalValue = withRepeat(\n                    finalValue,\n                    repeatCount,\n                    repeatReverse\n                  )\n                }\n                transform[transformKey] = finalValue\n              }\n            } else {\n              if (transition?.[transformKey]?.delay != null) {\n                delayMs = transition?.[transformKey]?.delay\n              }\n\n              let finalValue = animation(transformValue, config, callback)\n              if (shouldRepeat) {\n                finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n              }\n              if (delayMs != null) {\n                transform[transformKey] = withDelay(delayMs, finalValue)\n              } else {\n                transform[transformKey] = finalValue\n              }\n            }\n\n            if (Object.keys(transform).length) {\n              final['transform'].push(transform)\n            }\n          }\n        }\n      } else if (Array.isArray(value)) {\n        // we have a sequence\n\n        const sequence = getSequenceArray(key, value)\n        let finalValue = withSequence(sequence[0], ...sequence.slice(1))\n        if (shouldRepeat) {\n          finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n        }\n\n        if (isTransform(key)) {\n          // we have a sequence of transforms\n          final['transform'] = final['transform'] || []\n\n          if (sequence.length) {\n            const transform = {}\n\n            transform[key] = finalValue\n\n            // @ts-expect-error transform had the wrong type\n            final['transform'].push(transform)\n          }\n        } else {\n          // we have a normal sequence of items\n          // shadows not supported\n          if (sequence.length) {\n            final[key] = finalValue\n          }\n        }\n      } else if (isTransform(key)) {\n        final['transform'] = final['transform'] || []\n        // const transformKey = Object.keys(transformProp)[0]\n        // const transformValue = transformProp[transformKey]\n\n        if (transition?.[key]?.delay != null) {\n          delayMs = transition?.[key]?.delay\n        }\n\n        const transform = {}\n        let finalValue = animation(value, config, callback)\n        if (shouldRepeat) {\n          finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n        }\n        if (delayMs != null) {\n          transform[key] = withDelay(delayMs, finalValue)\n        } else {\n          transform[key] = finalValue\n        }\n\n        // @ts-expect-error transform had the wrong type\n        final['transform'].push(transform)\n      } else if (typeof value === 'object') {\n        // shadows\n        final[key] = {}\n        for (const innerStyleKey in value || {}) {\n          let finalValue = animation(value, config, callback)\n\n          if (shouldRepeat) {\n            finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n          }\n\n          if (delayMs != null) {\n            final[key][innerStyleKey] = withDelay(delayMs, finalValue)\n          } else {\n            final[key][innerStyleKey] = finalValue\n          }\n        }\n      } else {\n        let finalValue = animation(value, config, callback)\n        if (shouldRepeat) {\n          finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n        }\n\n        if (delayMs != null && typeof delayMs === 'number') {\n          final[key] = withDelay(delayMs, finalValue)\n        } else {\n          final[key] = finalValue\n        }\n      }\n    }\n\n    if (!final.transform?.length) {\n      delete final.transform\n    }\n\n    return final\n  }, [\n    animateProp,\n    custom,\n    defaultDelay,\n    disableInitialAnimation,\n    exitProp,\n    exitTransitionProp,\n    fromProp,\n    hasExitStyle,\n    isMounted,\n    isPresent,\n    onDidAnimate,\n    reanimatedOnDidAnimated,\n    reanimatedSafeToUnmount,\n    state,\n    stylePriority,\n    transitionProp,\n  ])\n\n  useEffect(() => {\n    isMounted.value = true\n  }, [isMounted])\n\n  useEffect(\n    function allowUnMountIfMissingExit() {\n      if (!isPresent && !hasExitStyle) {\n        reanimatedSafeToUnmount()\n      }\n    },\n    [hasExitStyle, isPresent, reanimatedSafeToUnmount]\n  )\n\n  return {\n    style,\n  }\n}\n"]}